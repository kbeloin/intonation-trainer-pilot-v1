(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(23),r=n.n(c),s=(n(74),n(126)),o=n(129),i=n(128),l=n(133),u=n(130),d=n(28),j=n(8),b=n(131),f=n(2),h=Object(s.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"center",spacing:"0",alignItems:"center",direction:"column",minHeight:"100%"}}})),O=Object(j.g)((function(e){var t=h();return Object(f.jsx)("div",{className:t.content,children:Object(f.jsxs)(i.a,{className:t.paper,children:[Object(f.jsx)(o.a,{container:!0,className:t.grid,children:Object(f.jsx)(u.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})}),Object(f.jsx)(b.a,{className:t.container,children:Object(f.jsx)(d.a,{className:t.button,to:"/2",style:{textDecoration:"none"},children:Object(f.jsx)(l.a,{variant:"outlined",children:"Enter"})},"")})]})})})),p=n(11),m=n(132),x=n(22),g=n.n(x),v=n(33),y={audioBitsPerSecond:16e3};new AudioContext,new FileReader;function N(){return(N=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,e.abrupt("return",new MediaRecorder(t,y));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(p.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)(null),u=Object(p.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(null),f=Object(p.a)(b,2),h=f[0],O=f[1];Object(a.useEffect)((function(){if(null!==d){o?d.start():d.stop();var e=function(e){var t=new AudioContext,n=new FileReader;n.readAsArrayBuffer(e.data),n.onloadend=function(){console.log("data loaded"),t.decodeAudioData(n.result).then((function(t){console.log(t);var n=t.getChannelData(0);O(n),c(URL.createObjectURL(e.data))}))}};return d.addEventListener("dataavailable",e),function(){return d.removeEventListener("dataavailable",e)}}o&&function(){return N.apply(this,arguments)}().then(j,console.error)}),[d,o]);return[n,o,function(){i(!0)},function(){i(!1)},h]},w=n(25),R=n.n(w),S=function(e){var t=C(),n=Object(p.a)(t,5),c=n[0],r=n[1],s=n[2],i=n[3],u=n[4];return Object(a.useEffect)((function(){u?e.sets(u):console.log("No current audio.")}),[u]),Object(f.jsx)("div",{className:"Recorder",id:"recorder",ref:e.forwardedRef,children:Object(f.jsxs)(o.a,{container:!0,children:[Object(f.jsx)("audio",{src:c,controls:!0}),Object(f.jsx)(l.a,{onClick:s,disabled:r,children:"start"}),Object(f.jsx)(l.a,{onClick:i,disabled:!r,children:"stop"})]})})},k=function(e){return Object(f.jsx)("div",{className:"Player",style:{marginRight:"100px"},children:Object(f.jsx)("audio",{controls:!0,src:e})})};R.a.defaults.xsrfCookieName="csrftoken",R.a.defaults.xsrfHeaderName="X-CSRFToken";var E=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()({method:"post",url:"/api/process/",data:t,headers:{"Content-Type":"application/octet-stream"},transformRequest:[function(e){return console.log("hello from transform"),JSON.stringify(e)}],transformResponse:[function(e){return console.log("hello from response"),JSON.parse(e)}]});case 2:return n=e.sent,console.log("Asychronous response"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=n(7),A=n(34);A.a.register.apply(A.a,Object(F.a)(A.b));var D=function(e){for(var t=e.x_y||[],n=0;n<t.length;n++)0===t[n].x&&(t[n].x=NaN),0===t[n].y&&(t[n].y=NaN);return t},I=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){var n=t.current.getContext("2d");new A.a(n,{type:"scatter",data:{datasets:[{label:"Pitch Frequency",data:e.data,borderWidth:1,backgroundColor:"rgb(255, 99, 132)"}]},options:{scales:{y:{},x:{}}}})}),[]),Object(f.jsx)("canvas",{id:"question-data",ref:t})},B=Object(s.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"row",minWidth:"100vw",minHeight:"80vh",display:"flex-box",elevation:3,alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"},chart:{justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"40%",marginBottom:"1vh",minWidth:"35vw"}}})),H=Object(j.g)((function(e){var t=B(),n=Object(a.useState)({}),c=Object(p.a)(n,2),r=c[0],s=c[1],u=Object(a.useState)(!0),d=Object(p.a)(u,2),j=(d[0],d[1],Object(a.useState)(!1)),b=Object(p.a)(j,2),h=b[0],O=b[1],x=Object(a.useState)(),g=Object(p.a)(x,2),v=(g[0],g[1]),y=Object(a.useState)(),N=Object(p.a)(y,2),C=(N[0],N[1]);Object(a.useRef)(null),Object(a.useRef)(null);return Object(a.useEffect)((function(){null===r?console.log("No changes recorded"):console.log("Processed data changed:",r)}),[r]),Object(a.useEffect)((function(){}),[]),Object(f.jsx)("div",{className:t.content,children:Object(f.jsx)(i.a,{className:t.paper,children:Object(f.jsxs)(o.a,{container:!0,className:t.grid,children:[Object(f.jsxs)(o.a,{item:!0,children:[Object(f.jsx)(i.a,{id:"question-data-container",className:t.chart,children:Object(f.jsx)(I,{sets:v,data:[]})}),Object(f.jsx)(k,{url:"https://intonation-trainer.s3.us-east-2.amazonaws.com/test-audio.mp3"})]}),Object(f.jsxs)(o.a,{item:!0,children:[Object(f.jsx)(i.a,{id:"response-data-container",className:t.chart,children:h?Object(f.jsx)(m.a,{}):Object(f.jsx)(I,{sets:C,data:r})}),Object(f.jsx)(S,{sets:function(e){!function(e){console.log(h),E(e).then((function(e){var t=D(e.data);s(t),O(!1)}))}(e),O(!0)}})]}),Object(f.jsx)(o.a,{item:!0,children:Object(f.jsx)(l.a,{variant:"outlined",onClick:function(){},children:"Welcome"})})]})})})}));function L(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(j.a,{children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{exact:!0,path:"/",component:O}),Object(f.jsx)(j.b,{path:"/2",component:H})]})})})}var P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};r.a.render(Object(f.jsx)(L,{}),document.getElementById("root")),P()},74:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.dd7defd7.chunk.js.map