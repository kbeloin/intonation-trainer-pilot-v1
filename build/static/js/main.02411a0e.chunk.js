(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(33),c=n.n(i),r=(n(144),n(7)),o=n(235),s=n(234),l=n(236),d=n(241),u=n(237),j=n(21),b=n(29),h=n.n(b),f=n(48),p=n(19),x=n.n(p);x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var O=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()({method:"post",url:"/api/get-responses/",data:{params:t}});case 2:return n=e.sent,console.log(t),console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()({method:"post",url:"/api/submit-response/",data:t});case 2:return n=e.sent,console.log("Submitted response"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=n(240),v=(n(247),n(259),n(257),n(258),n(255),n(1));var y=n(228),C=n(16),k=n(66);k.a.register.apply(k.a,Object(C.a)(k.b));var w=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){var n=t.current.getContext("2d");new k.a(n,{type:"scatter",data:{datasets:[{label:"Pitch Frequency",data:e.data,borderWidth:1,backgroundColor:"rgb(255, 99, 132)"}]},options:{scales:{y:{},x:{}}}})}),[]),Object(v.jsx)("canvas",{id:"question-data",ref:t})},S={audioBitsPerSecond:16e3};new AudioContext,new FileReader;function _(){return(_=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,e.abrupt("return",new MediaRecorder(t,S));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(!1),o=Object(r.a)(c,2),s=o[0],l=o[1],d=Object(a.useState)(null),u=Object(r.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(null),f=Object(r.a)(h,2),p=f[0],x=f[1];Object(a.useEffect)((function(){if(null!==j){s?j.start():j.stop();var e=function(e){var t=new AudioContext,n=new FileReader;n.readAsArrayBuffer(e.data),n.onloadend=function(){console.log("data loaded"),t.decodeAudioData(n.result).then((function(t){console.log(t);var n=t.getChannelData(0);x(n),i(URL.createObjectURL(e.data))}))}};return j.addEventListener("dataavailable",e),function(){return j.removeEventListener("dataavailable",e)}}s&&function(){return _.apply(this,arguments)}().then(b,console.error)}),[j,s]);return[n,s,function(){l(!0)},function(){l(!1)},p]},R=function(e){var t=N(),n=Object(r.a)(t,5),i=n[0],c=n[1],o=n[2],l=n[3],u=n[4];return Object(a.useEffect)((function(){u?(console.log("Raw data ready."),e.sets(u)):console.log("No current audio.")}),[u]),Object(v.jsx)("div",{className:"Recorder",id:"recorder",ref:e.forwardedRef,children:Object(v.jsxs)(s.a,{container:!0,children:[Object(v.jsx)("audio",{src:i,controls:!0}),Object(v.jsx)(d.a,{onClick:o,disabled:c,children:"start"}),Object(v.jsx)(d.a,{onClick:l,disabled:!c,children:"stop"})]})})},I=n(238),L=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),minWidth:"100vw",minHeight:"85vh",display:"flex",elevation:3,position:"relative"},container:{}}}));x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var B=Object(j.h)((function(e){var t=Object(a.useState)("/"),n=Object(r.a)(t,2),i=(n[0],n[1],Object(a.useState)(!1)),c=Object(r.a)(i,2),o=c[0],b=c[1],h=Object(a.useState)(""),f=Object(r.a)(h,2),p=f[0],m=f[1],C=(Object(a.useRef)(),["id"]),k=Object(j.g)(),w=function(){O(C).then((function(e){var t=e.data;console.log(t.type),k.push("/".concat(t.type))}))},S=L();return Object(a.useEffect)((function(){O(C).then((function(e){var t=e.data;"None"===t?b(!0):(console.log("User exists. Redirecting to: ",t.type),k.push("/".concat(t.type)))}))}),[]),Object(v.jsx)("div",{children:Object(v.jsx)(l.a,{className:S.paper,children:Object(v.jsxs)(s.a,{container:!0,children:[Object(v.jsx)(s.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(v.jsx)(s.a,{item:!0,xs:12,children:Object(v.jsx)(y.a,{in:o,children:Object(v.jsx)(u.a,{variant:"h1",component:"h",gutterBottom:!0})})})}),Object(v.jsx)(s.a,{container:!0,direction:"column",justifyContent:"flex-end",alignItems:"center",children:Object(v.jsx)(s.a,{item:!0,xs:12,children:Object(v.jsx)(y.a,{in:o,children:Object(v.jsx)(u.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})})})}),Object(v.jsx)(s.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(v.jsxs)(I.a,{direction:"row",spacing:6,xs:12,children:[Object(v.jsx)(g.a,{autoFocus:!0,margin:"dense",id:"code",label:"Experiment Code",variant:"outlined",value:p,onChange:function(e){m(e.target.value)}}),Object(v.jsx)(d.a,{onClick:function(){!function(e){O(C).then((function(t){console.log("Checking if user exists...");var n=t.data;"Next"===(null===n||void 0===n?void 0:n.message)&&w(),"None"===n&&x()({method:"post",url:"/api/create-response-set/",data:{code:e}}).then((function(e){console.log("Created response set for user."),w()}))}))}(p)},children:" Enter"})]})})]})})})})),z=function(e){return Object(v.jsx)("div",{className:"Player",children:Object(v.jsx)("audio",{controls:!0,src:e.url})})},W=n(252),T=n(243),E=n(249),A=n(253),F=n(49),H=n(254),D=n(4),M=n(250),P=n(121),X=Object(D.a)(H.a)((function(e){var t=e.theme;return Object(F.a)(Object(F.a)({},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})})),q=function(e){var t=e.callback,n=e.wordList,i=e.setWordList,c=e.correct,o=e.incorrect,s=e.force,l=Object(a.useState)(""),u=Object(r.a)(l,2),j=u[0],b=u[1];return Object(v.jsxs)(I.a,{direction:"column",spacing:1,children:[Object(v.jsxs)(I.a,{direction:"row",spacing:6,xs:12,children:[Object(v.jsx)(g.a,{autoFocus:!0,margin:"dense",id:"code",label:"Enter Word",variant:"outlined",value:j,onChange:function(e){b(e.target.value)}}),Object(v.jsx)(d.a,{onClick:function(){var e=n.concat({value:j.toLowerCase(),id:Object(P.v4)()});i(e),b("")},value:j,disabled:c||o||s,children:" Add "}),Object(v.jsx)(d.a,{onClick:function(){t(n)},disabled:c||o||s,children:" Submit"})]}),Object(v.jsx)(I.a,{direction:"row",spacing:2,children:n.map((function(e){return Object(v.jsxs)(X,{children:[e.value,Object(v.jsx)(E.a,{"aria-label":"close",color:"info",size:"small",onClick:function(){return function(e){var t=n.filter((function(t){return t.id!==e}));i(t)}(e.id)},children:Object(v.jsx)(M.a,{children:"close"})})]},e.id)}))})]})},J=n(251),U=n(246),Q=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),minWidth:"100vw",height:"85vh",display:"flex",elevation:3,position:"relative",justifyContent:"center"}}}));x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var Y=Object(j.h)((function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(!1),o=Object(r.a)(c,2),s=o[0],b=o[1],h=Object(a.useState)(null),f=Object(r.a)(h,2),p=f[0],x=f[1],g=Object(a.useState)(null),y=Object(r.a)(g,2),C=y[0],k=y[1],w=Object(a.useState)(null),S=Object(r.a)(w,2),_=S[0],N=S[1],R=Object(a.useState)(null),L=Object(r.a)(R,2),B=L[0],F=L[1],H=Object(a.useState)(null),D=Object(r.a)(H,2),P=D[0],X=D[1],q=["id","filepath"],Y=Object(j.g)(),G=Q(),K=function(){i(!1),b(!1),O(q).then((function(e){var t=e.data;x(t),F(t.sentence[0]),X(t.sentence[1])}))};return Object(a.useEffect)((function(){O(q).then((function(e){console.log(e.data);var t=e.data;x(t),console.log(t.sentence[0]),F(t.sentence[0]),X(t.sentence[1])}))}),[]),Object(v.jsx)("div",{children:Object(v.jsxs)(l.a,{className:G.paper,children:[Object(v.jsx)(I.a,{direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:5,children:Object(v.jsx)(u.a,{variant:"subtitle1",component:"h2",gutterBottom:!0,children:p?"TRIAL "+p.trial_id+" : "+p.response_id:"Loading"})}),Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:5,children:[Object(v.jsx)(u.a,{variant:"subtitle1",component:"h2",gutterBottom:!0,children:p?p.text.instructions_short:"Loading..."}),Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",alignContent:"center",spacing:6,children:[Object(v.jsxs)(I.a,{direction:"row",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(v.jsx)(u.a,{style:{marginRight:"20px",marginLeft:"20px"},variant:"subtitle1",component:"h2",gutterBottom:!0,children:"A"}),Object(v.jsx)(z,{url:B?B.filepath:null})]}),Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(v.jsx)(u.a,{style:{marginRight:"20px",marginLeft:"20px"},variant:"subtitle1",component:"h2",gutterBottom:!0,children:"B"}),Object(v.jsx)(z,{url:P?P.filepath:null})]})]}),Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(v.jsx)(u.a,{style:{marginRight:"20px",marginLeft:"20px"},variant:"subtitle1",component:"h2",gutterBottom:!0,children:"More Polite?"}),Object(v.jsxs)(U.a,{orientation:"horizontal",value:C,exclusive:!0,onChange:function(e,t){console.log(t),k(t)},children:[Object(v.jsx)(J.a,{disabled:n||s,value:p?p.sentence[0]:-1,"aria-label":"A",fullWidth:!0,children:"Sentence A`"}),Object(v.jsx)(J.a,{disabled:n||s,value:p?p.sentence[1]:-1,"aria-label":"B",fullWidth:!0,children:"Sentence B"})]})]}),Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(v.jsx)(u.a,{style:{marginRight:"20px",marginLeft:"20px"},variant:"subtitle1",component:"h2",gutterBottom:!0,children:"More Appropriate Prominence?"}),Object(v.jsxs)(U.a,{orientation:"horizontal",value:_,exclusive:!0,onChange:function(e,t){console.log(t),N(t)},children:[Object(v.jsx)(J.a,{value:p?p.sentence[0]:-1,"aria-label":"list",disabled:n||s,children:"Sentence A"}),Object(v.jsx)(J.a,{value:p?p.sentence[1]:-1,"aria-label":"quilt",disabled:n||s,children:"Sentence B"})]})]})]}),Object(v.jsxs)(W.a,{style:{width:"100%"},children:[Object(v.jsx)(A.a,{in:n,children:Object(v.jsx)(T.a,{action:Object(v.jsx)(E.a,{"aria-label":"close",color:"inherit",size:"small"}),sx:{mb:2},children:"Well done! Click next to continue."})}),Object(v.jsx)(A.a,{in:s,children:Object(v.jsxs)(T.a,{action:Object(v.jsx)(E.a,{"aria-label":"close",color:"error",size:"small",onClick:function(){K()},children:Object(v.jsx)(M.a,{children:"close"})}),severity:"error",sx:{mb:2},children:["Not Quite! Remember to listen to the tone choice at the ",Object(v.jsx)("u",{children:"end"})," of the word."]})})]}),Object(v.jsx)(d.a,{size:"medium",variant:"contained",onClick:function(){!function(){var e=p.target,t=_;if(console.log(t),console.log(e),t.id!==e){b(!0);var n={eval:0,response:t.id,response_id:p.response_id};m(n)}else{i(!0),console.log(e);var a={eval:1,response:t.id,response_id:p.response_id};m(a)}}()},disabled:!C||!_||n||s,children:"Submit"})]}),Object(v.jsx)(d.a,{size:"large",variant:"contained",style:{alignSelf:"flex-end"},onClick:function(){i(!1),O(["id"]).then((function(e){var t=e.data;console.log(t),t.task_id!=p.task_id&&(console.log("Task completed. Moving to next task"),Y.push("/".concat(t.type))),t.trial_id!=p.trial_id?(console.log("Trial completed. Moving to next trial"),K()):(x(t),F(t.sentence[0]),X(t.sentence[1]))}))},disabled:!n,children:"Next"})]})})})),G=n(260);x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var K=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()({method:"post",url:"/api/process/",data:t,headers:{"Content-Type":"application/octet-stream"},transformRequest:[function(e){return JSON.stringify(e)}],transformResponse:[function(e){return JSON.parse(e)}]});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){for(var t=e.x_y||[],n=0;n<t.length;n++)0===t[n].x&&(t[n].x=NaN),0===t[n].y&&(t[n].y=NaN);return t},Z=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"row",minWidth:"100vw",minHeight:"85vh",display:"flex-box",elevation:3,alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"},chart:{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",minHeight:"40%",marginBottom:"1vh",minWidth:"35vw"}}})),$=Object(j.h)((function(e){var t=Z(),n=Object(a.useState)(null),i=Object(r.a)(n,2),c=i[0],o=i[1],u=Object(a.useState)(null),b=Object(r.a)(u,2),h=b[0],f=b[1],p=Object(a.useState)(!1),x=Object(r.a)(p,2),g=x[0],y=x[1],C=Object(j.g)(),k=function(){var e={response_id:h.response_id,responseData:c};m(e).then((function(e){e.data;C.push("/")}))};return Object(a.useEffect)((function(){null===c?O().then((function(e){return f(e.data)})):(console.log("Processed data changed:",c),O().then((function(e){h.task_id!==e.data.task_id?k():f(e.data)})))}),[c]),Object(v.jsx)("div",{className:t.content,children:Object(v.jsx)(l.a,{className:t.paper,children:Object(v.jsxs)(s.a,{container:!0,className:t.grid,children:[Object(v.jsxs)(s.a,{item:!0,children:[Object(v.jsx)(l.a,{id:"question-data-container",className:t.chart,children:h?Object(v.jsx)(w,{data:V(h.taskData.audio)}):Object(v.jsx)(G.a,{})}),Object(v.jsx)(z,{url:h?h.taskData.files[0].filepath:null})]}),Object(v.jsxs)(s.a,{item:!0,children:[Object(v.jsx)(l.a,{id:"response-data-container",className:t.chart,children:g?Object(v.jsx)(G.a,{}):Object(v.jsx)(w,{data:c})}),Object(v.jsx)(R,{sets:function(e){!function(e){var t=e,n=h.response_id;K({audio:t,response_id:n}).then((function(e){var t=V(e.data);o(t),y(!1)}))}(e),y(!0)}})]}),Object(v.jsx)(s.a,{item:!0,children:Object(v.jsx)(d.a,{variant:"outlined",onClick:function(){k()},children:"Welcome"})})]})})})})),ee=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"row",minWidth:"100vw",minHeight:"85vh",display:"flex-box",elevation:3,alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"},chart:{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",minHeight:"40%",marginBottom:"1vh",minWidth:"35vw"}}})),te=Object(j.h)((function(e){var t=ee(),n=Object(a.useState)(null),i=Object(r.a)(n,2),c=i[0],o=i[1],u=Object(a.useState)(null),b=Object(r.a)(u,2),h=b[0],f=b[1],p=Object(a.useState)(!1),x=Object(r.a)(p,2),g=x[0],y=x[1],C=Object(j.g)(),k=function(){var e={response_id:h.response_id,responseData:c};m(e).then((function(e){var t=e.data;console.log(t),C.push("/")}))};return Object(a.useEffect)((function(){null===c?O().then((function(e){return f(e.data)})):(console.log("Processed data changed:",c),O().then((function(e){h.task_id!==e.data.task_id?k():f(e.data)})))}),[c]),Object(v.jsx)("div",{className:t.content,children:Object(v.jsx)(l.a,{className:t.paper,children:Object(v.jsxs)(s.a,{container:!0,className:t.grid,children:[Object(v.jsx)(s.a,{item:!0}),Object(v.jsxs)(s.a,{item:!0,children:[Object(v.jsx)(l.a,{id:"response-data-container",className:t.chart,children:g?Object(v.jsx)(G.a,{}):Object(v.jsx)(w,{data:c})}),Object(v.jsx)(R,{sets:function(e){!function(e){var t=e,n=h.response_id;K({audio:t,response_id:n}).then((function(e){var t=V(e.data);o(t),y(!1)}))}(e),y(!0)}})]}),Object(v.jsx)(s.a,{item:!0,children:Object(v.jsx)(d.a,{size:"Large",variant:"outlined",onClick:function(){k()},children:"Welcome"})})]})})})})),ne=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),justifyContent:"center",minWidth:"100vw",height:"85vh",display:"flex",elevation:3,position:"relative"}}}));x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var ae=Object(j.h)((function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(!1),o=Object(r.a)(c,2),s=o[0],b=o[1],h=Object(a.useState)(null),f=Object(r.a)(h,2),p=f[0],x=f[1],g=["id","filepath","intonation"],y=Object(j.g)(),C=ne(),k=function(){i(!1),b(!1),O(g).then((function(e){var t=e.data;x(t)}))},w=function(e){var t=e.currentTarget.value;if(t!==p.target){b(!0);var n={eval:0,response:t,response_id:p.response_id};m(n)}else{i(!0),console.log(t);var a={eval:1,response:t,response_id:p.response_id};m(a)}};return Object(a.useEffect)((function(){O(g).then((function(e){var t=e.data;x(t)}))}),[]),Object(v.jsx)("div",{children:Object(v.jsxs)(l.a,{className:C.paper,children:[Object(v.jsx)(I.a,{direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:5,children:Object(v.jsx)(u.a,{variant:"subtitle1",component:"h2",gutterBottom:!0,children:p?"TRIAL "+p.trial_id+" : "+p.response_id:"Loading"})}),Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:5,children:[Object(v.jsx)(u.a,{variant:"subtitle1",component:"h2",gutterBottom:!0,children:p?p.text.instructions_short:"Loading..."}),Object(v.jsx)(z,{url:p?p.sentence.filepath:null}),Object(v.jsxs)(W.a,{style:{width:"100%"},children:[Object(v.jsx)(A.a,{in:n,children:Object(v.jsx)(T.a,{action:Object(v.jsx)(E.a,{"aria-label":"close",color:"inherit",size:"small"}),sx:{mb:2},children:"Well done! Click next to continue."})}),Object(v.jsx)(A.a,{in:s,children:Object(v.jsxs)(T.a,{action:Object(v.jsx)(E.a,{"aria-label":"close",color:"error",size:"small",onClick:function(){k()},children:Object(v.jsx)(M.a,{children:"close"})}),severity:"error",sx:{mb:2},children:["Try again! Remember to listen to the tone choice at the ",Object(v.jsx)("u",{children:"end"})," of the word."]})})]}),Object(v.jsxs)(I.a,{direction:"row",spacing:18,xs:12,children:[Object(v.jsx)(d.a,{variant:"outlined",size:"large",onClick:function(e){return w(e)},value:"rising",disabled:n||s,children:"Rising"}),Object(v.jsx)(d.a,{variant:"outlined",size:"large",onClick:function(e){return w(e)},value:"level",disabled:n||s,children:"Level"}),Object(v.jsx)(d.a,{variant:"outlined",size:"large",onClick:function(e){return w(e)},value:"falling",disabled:n||s,children:"Falling"})]})]}),Object(v.jsx)(d.a,{size:"large",variant:"contained",style:{alignSelf:"flex-end"},onClick:function(){O(["id"]).then((function(e){var t=e.data;console.log(t),t.task_id!=p.task_id&&(console.log("Task completed. Moving to next task"),y.push("/".concat(t.type))),t.trial_id!=p.trial_id?(console.log("Trial completed. Moving to next trial"),k()):x(t)}))},disabled:!n,children:"Next"})]})})})),ie=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),minWidth:"100vw",height:"85vh",display:"flex",elevation:3,position:"relative",justifyContent:"center"}}}));x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var ce=Object(j.h)((function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(!1),o=Object(r.a)(c,2),s=o[0],b=o[1],h=Object(a.useState)(!1),f=Object(r.a)(h,2),p=f[0],x=f[1],g=Object(a.useState)(null),y=Object(r.a)(g,2),k=y[0],w=y[1],S=["id","filepath","prominent_words"],_=Object(j.g)(),N=Object(a.useState)([]),R=Object(r.a)(N,2),L=R[0],B=R[1],F=ie(),H=function(){i(!1),b(!1),x(!1),O(S).then((function(e){var t=e.data;w(t)}))};return Object(a.useEffect)((function(){O(S).then((function(e){var t=e.data;w(t)}))}),[]),Object(v.jsx)("div",{children:Object(v.jsxs)(l.a,{className:F.paper,children:[Object(v.jsx)(I.a,{direction:"row",justifyContent:"flex-start",alignItems:"flex-start",spacing:5,children:Object(v.jsx)(u.a,{variant:"subtitle1",component:"h2",gutterBottom:!0,children:k?"TRIAL "+k.trial_id+" : "+k.response_id:"Loading"})}),Object(v.jsxs)(I.a,{direction:"column",justifyContent:"center",alignItems:"center",spacing:5,children:[Object(v.jsx)(u.a,{variant:"subtitle1",component:"h2",gutterBottom:!0,children:k?k.text.instructions_short:"Loading..."}),Object(v.jsx)(z,{url:k?k.sentence.filepath:null}),Object(v.jsxs)(W.a,{style:{width:"100%"},children:[Object(v.jsx)(A.a,{in:n,children:Object(v.jsx)(T.a,{action:Object(v.jsx)(E.a,{"aria-label":"close",color:"inherit",size:"small"}),sx:{mb:2},children:"Well done! Click next to continue."})}),Object(v.jsx)(A.a,{in:s,children:Object(v.jsxs)(T.a,{action:Object(v.jsx)(E.a,{"aria-label":"close",color:"error",size:"small",onClick:function(){H()},children:Object(v.jsx)(M.a,{children:"close"})}),severity:"error",sx:{mb:2},children:["Try again! Remember to listen to the tone choice at the ",Object(v.jsx)("u",{children:"end"})," of the word."]})}),Object(v.jsx)(A.a,{in:p,children:Object(v.jsx)(T.a,{action:Object(v.jsx)(E.a,{"aria-label":"close",color:"error",size:"small"}),severity:"error",sx:{mb:2},children:"You've reached the maximum number of attempts. Click next to continue!"})})]}),Object(v.jsx)(I.a,{direction:"row",spacing:18,xs:12,children:Object(v.jsx)(q,{callback:function(){var e=new Set;L.forEach((function(t){return e.add(t.value)}));var t=new Set(k.sentence.prominent_words.split(",")),n=new Set(Object(C.a)(t).filter((function(t){return!e.has(t)}))),a=new Set(Object(C.a)(e).filter((function(e){return!t.has(e)})));if(console.log(n.size&&a.size),!n.size&&!a.size){i(!0),console.log(e);var c={eval:1,response:e,response_id:k.response_id};return m(c),void B([])}var r={eval:0,response:e,response_id:k.response_id};m(r).then((function(e){e.data.trial_id!==k.trial_id?x(!0):b(!0)}))},wordList:L,setWordList:B,correct:n,incorrect:s,force:p})})]}),Object(v.jsx)(d.a,{size:"large",variant:"contained",style:{alignSelf:"flex-end"},onClick:function(){O(["id"]).then((function(e){var t=e.data;console.log(t),t.task_id!=k.task_id&&(console.log("Task completed. Moving to next task"),_.push("/".concat(t.type))),t.trial_id!=k.trial_id?(console.log("Trial completed. Moving to next trial"),H()):w(t)}))},disabled:!n||!p,children:"Next"})]})})})),re=n(40),oe=n(239),se=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"center",spacing:"0",alignItems:"center",direction:"column",minHeight:"100%"}}})),le=Object(j.h)((function(e){var t=se();return Object(v.jsx)("div",{className:t.content,children:Object(v.jsxs)(l.a,{className:t.paper,children:[Object(v.jsx)(s.a,{container:!0,className:t.grid,children:Object(v.jsx)(u.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})}),Object(v.jsx)(oe.a,{className:t.container,children:Object(v.jsx)(re.a,{className:t.button,to:"/production-task",style:{textDecoration:"none"},children:Object(v.jsx)(d.a,{variant:"outlined",children:"Enter"})},"")})]})})}));function de(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(j.a,{children:Object(v.jsxs)(j.d,{children:[Object(v.jsx)(j.b,{exact:!0,path:"/",component:B}),Object(v.jsx)(j.b,{exact:!0,path:"/perception-identification-tones",component:ae}),Object(v.jsx)(j.b,{exact:!0,path:"/perception-discrimination",component:Y}),Object(v.jsx)(j.b,{exact:!0,path:"/perception-identification-prominence",component:ce}),Object(v.jsx)(j.b,{path:"/production-controlled",component:$}),Object(v.jsx)(j.b,{path:"/production-reading",component:te}),Object(v.jsx)(j.b,{path:"/perception-task",component:Y}),Object(v.jsx)(j.b,{exact:!0,path:"/done",component:le})]})})})}var ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,262)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};c.a.render(Object(v.jsx)(de,{}),document.getElementById("root")),ue()}},[[177,1,2]]]);
//# sourceMappingURL=main.02411a0e.chunk.js.map