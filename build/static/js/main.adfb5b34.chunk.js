(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{64:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(21),r=n.n(c),i=(n(64),n(110)),o=n(113),s=n(112),l=n(116),u=n(114),d=n(25),j=n(4),b=n(115),f=n(2),h=Object(i.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"center",spacing:"0",alignItems:"center",direction:"column",minHeight:"100%"}}})),p=Object(j.g)((function(e){var t=h();return Object(f.jsx)("div",{className:t.content,children:Object(f.jsxs)(s.a,{className:t.paper,children:[Object(f.jsx)(o.a,{container:!0,className:t.grid,children:Object(f.jsx)(u.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})}),Object(f.jsx)(b.a,{className:t.container,children:Object(f.jsx)(d.a,{className:t.button,to:"/2",style:{textDecoration:"none"},children:Object(f.jsx)(l.a,{variant:"outlined",children:"Enter"})},"")})]})})})),m=n(8),O=n(20),g=n.n(O),x=n(30),v={audioBitsPerSecond:16e3};new AudioContext,new FileReader;function y(){return(y=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,e.abrupt("return",new MediaRecorder(t,v));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(m.a)(r,2),o=i[0],s=i[1],l=Object(a.useState)(null),u=Object(m.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(null),f=Object(m.a)(b,2),h=f[0],p=f[1];Object(a.useEffect)((function(){if(null!==d){o?d.start():d.stop();var e=function(e){var t=new AudioContext,n=new FileReader;n.readAsArrayBuffer(e.data),n.onloadend=function(){console.log("data loaded"),t.decodeAudioData(n.result).then((function(t){console.log(t);var n=t.getChannelData(0);p(n),c(URL.createObjectURL(e.data))}))}};return d.addEventListener("dataavailable",e),function(){return d.removeEventListener("dataavailable",e)}}o&&function(){return y.apply(this,arguments)}().then(j,console.error)}),[d,o]);return[n,o,function(){s(!0)},function(){s(!1)},h]},C=n(22),w=n.n(C),R=function(e){var t=N(),n=Object(m.a)(t,5),c=n[0],r=n[1],i=n[2],s=n[3],u=n[4];return Object(a.useEffect)((function(){u?e.sets(u):console.log("No current audio.")}),[u]),Object(f.jsx)("div",{className:"Recorder",id:"recorder",ref:e.forwardedRef,children:Object(f.jsxs)(o.a,{container:!0,children:[Object(f.jsx)("audio",{src:c,controls:!0}),Object(f.jsx)(l.a,{onClick:i,disabled:r,children:"start"}),Object(f.jsx)(l.a,{onClick:s,disabled:!r,children:"stop"})]})})},S=function(e){return Object(f.jsx)("div",{className:"Player",style:{marginRight:"100px"},children:Object(f.jsx)("audio",{controls:!0,src:e})})};w.a.defaults.xsrfCookieName="csrftoken",w.a.defaults.xsrfHeaderName="X-CSRFToken";var k=function(){var e=Object(x.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"post",url:"/api/process/",data:t,headers:{"Content-Type":"application/octet-stream"},transformRequest:[function(e){return console.log("hello from transform"),JSON.stringify(e)}],transformResponse:[function(e){return console.log("hello from response"),JSON.parse(e)}]});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=n(10),I=n(31);I.a.register.apply(I.a,Object(E.a)(I.b));var B=function(e){for(var t=e.x_y||[],n=0;n<t.length;n++)0===t[n].x&&(t[n].x=NaN),0===t[n].y&&(t[n].y=NaN);return t},F=function(e,t){var n=e.getContext("2d");return new I.a(n,{type:"scatter",data:{datasets:[{label:"Pitch Frequency",data:t,borderWidth:1,backgroundColor:"rgb(255, 99, 132)"}]},options:{scales:{y:{},x:{}}}})},A=Object(i.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"row",minWidth:"100vw",minHeight:"80vh",display:"flex-box",elevation:3,alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"},chart:{justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"40%",marginBottom:"1vh",minWidth:"35vw"}}})),D=Object(j.g)((function(e){var t=A(),n=Object(a.useState)(null),c=Object(m.a)(n,2),r=c[0],i=c[1],u=Object(a.useState)(),d=Object(m.a)(u,2),j=(d[0],d[1],Object(a.useState)()),b=Object(m.a)(j,2),h=(b[0],b[1]),p=Object(a.useState)(),O=Object(m.a)(p,2),g=O[0],x=O[1],v=Object(a.useRef)(null),y=Object(a.useRef)(null);return Object(a.useEffect)((function(){null===r?console.log("No changes recorded"):console.log("Processed data changed:",r)}),[r]),Object(a.useEffect)((function(){h(F(y.current,[])),x(F(v.current,[]))}),[]),Object(f.jsx)("div",{className:t.content,children:Object(f.jsx)(s.a,{className:t.paper,children:Object(f.jsxs)(o.a,{container:!0,className:t.grid,children:[Object(f.jsxs)(o.a,{item:!0,children:[Object(f.jsx)(s.a,{id:"question-data-container",className:t.chart,children:Object(f.jsx)("canvas",{id:"question-data",ref:y})}),Object(f.jsx)(S,{url:"https://intonation-trainer.s3.us-east-2.amazonaws.com/test-audio.mp3"})]}),Object(f.jsxs)(o.a,{item:!0,children:[Object(f.jsx)(s.a,{id:"response-data-container",className:t.chart,children:Object(f.jsx)("canvas",{id:"response-data",ref:v})}),Object(f.jsx)(R,{sets:function(e){var t=function(e,t,n){n.destroy(),document.getElementById(e).remove();var a=document.createElement("canvas");return a.setAttribute("id",e),document.getElementById(t).append(a),a}("response-data","response-data-container",g);k(e).then((function(e){var n=B(e.data);x(F(t,n)),i(n)}))}})]}),Object(f.jsx)(o.a,{item:!0,children:Object(f.jsx)(l.a,{variant:"outlined",onClick:function(){},children:"Welcome"})})]})})})}));function H(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(j.a,{children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{exact:!0,path:"/",component:p}),Object(f.jsx)(j.b,{path:"/2",component:D})]})})})}var L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,118)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};r.a.render(Object(f.jsx)(H,{}),document.getElementById("root")),L()}},[[94,1,2]]]);
//# sourceMappingURL=main.adfb5b34.chunk.js.map