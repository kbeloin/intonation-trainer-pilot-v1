(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{57:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(19),i=n.n(a),r=(n(57),n(101)),s=n(104),o=n(103),u=n(107),l=n(105),d=n(21),j=n(4),b=n(106),f=n(2),h=Object(r.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"center",spacing:"0",alignItems:"center",direction:"column",minHeight:"100%"}}})),p=Object(j.g)((function(e){var t=h();return Object(f.jsx)("div",{className:t.content,children:Object(f.jsxs)(o.a,{className:t.paper,children:[Object(f.jsx)(s.a,{container:!0,className:t.grid,children:Object(f.jsx)(l.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})}),Object(f.jsx)(b.a,{className:t.container,children:Object(f.jsx)(d.a,{className:t.button,to:"/2",style:{textDecoration:"none"},children:Object(f.jsx)(u.a,{variant:"outlined",children:"Enter"})},"")})]})})})),O=n(17),m=n(32),g=n.n(m),v=n(42),x={audioBitsPerSecond:16e3};function y(){return(y=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,e.abrupt("return",new MediaRecorder(t,x));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),r=Object(O.a)(i,2),s=r[0],o=r[1],u=Object(c.useState)(null),l=Object(O.a)(u,2),d=l[0],j=l[1],b=Object(c.useState)(null),f=Object(O.a)(b,2),h=f[0],p=f[1];Object(c.useEffect)((function(){if(null!==d){s?d.start():d.stop();var e=function(e){var t=new Blob([e.data]),n=new FileReader;n.readAsArrayBuffer(t),n.onloadend=function(){var t=new Int8Array(n.result);p(t),a(URL.createObjectURL(e.data))}};return d.addEventListener("dataavailable",e),function(){return d.removeEventListener("dataavailable",e)}}s&&function(){return y.apply(this,arguments)}().then(j,console.error)}),[d,s]);return[n,s,function(){o(!0)},function(){o(!1)},h]},N=n(27),R=n.n(N);R.a.defaults.xsrfCookieName="csrftoken",R.a.defaults.xsrfHeaderName="X-CSRFToken";var w=function(e){var t=C(),n=Object(O.a)(t,5),a=n[0],i=n[1],r=n[2],s=n[3],o=n[4],u=Object(c.useRef)(),l=u.current;l&&l.addEventListener("canplaythrough",(function(t){o&&e.sets(o)}));return Object(f.jsxs)("div",{className:"Recorder",id:"recorder",ref:e.forwardedRef,children:[Object(f.jsx)("audio",{src:a,ref:u,controls:!0}),Object(f.jsx)("button",{onClick:r,disabled:i,children:"start recording"}),Object(f.jsx)("button",{onClick:s,disabled:!i,children:"stop recording"})]})};function S(){return Object(f.jsx)("div",{className:"Player",children:Object(f.jsx)("audio",{controls:!0,src:"https://intonation-trainer.s3.us-east-2.amazonaws.com/test-audio.mp3"})})}var k=Object(r.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"}}})),H=function(){try{return document.cookie.split("; ").find((function(e){return e.startsWith("csrftoken=")})).split("=")[1]}catch(e){console.log(e)}},L=Object(j.g)((function(e){var t=Object(c.useState)(),n=Object(O.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(),l=Object(O.a)(r,2),d=l[0],j=l[1],h=k(),p=Object(c.useRef)(null);return Object(c.useEffect)((function(){void 0===a?console.log("None"):function(e){var t=new XMLHttpRequest;t.open("POST","/api/process/",!0),t.setRequestHeader("X-CSRFToken",H()),t.setRequestHeader("Content-Type","application/octet-stream"),t.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&this.status},t.send(JSON.stringify(e))}(a)}),[a]),Object(f.jsx)("div",{className:h.content,children:Object(f.jsx)(o.a,{className:h.paper,children:Object(f.jsxs)(b.a,{className:h.container,children:[Object(f.jsxs)(s.a,{container:!0,className:h.grid,children:[Object(f.jsx)(S,{}),Object(f.jsx)(w,{forwardedRef:p,sets:j})]}),Object(f.jsx)(u.a,{variant:"outlined",onClick:function(){console.log(d),i(d)},children:"Welcome"})]})})})}));function E(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(j.a,{children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{exact:!0,path:"/",component:p}),Object(f.jsx)(j.b,{path:"/2",component:L})]})})})}var F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,109)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};i.a.render(Object(f.jsx)(E,{}),document.getElementById("root")),F()}},[[87,1,2]]]);
//# sourceMappingURL=main.840e9e5e.chunk.js.map