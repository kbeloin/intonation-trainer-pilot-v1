(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(26),i=n.n(c),r=(n(76),n(6)),o=n(128),s=n(126),l=n(129),u=n(133),d=n(130),j=n(23),b=n(9),f=n(131),h=n(22),O=n.n(h),p=n(28),m=n(24),x=n.n(m);x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var g=n(132),v={audioBitsPerSecond:16e3};new AudioContext,new FileReader;function y(){return(y=Object(p.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,e.abrupt("return",new MediaRecorder(t,v));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),o=Object(r.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(null),d=Object(r.a)(u,2),j=d[0],b=d[1],f=Object(a.useState)(null),h=Object(r.a)(f,2),O=h[0],p=h[1];Object(a.useEffect)((function(){if(null!==j){s?j.start():j.stop();var e=function(e){var t=new AudioContext,n=new FileReader;n.readAsArrayBuffer(e.data),n.onloadend=function(){console.log("data loaded"),t.decodeAudioData(n.result).then((function(t){console.log(t);var n=t.getChannelData(0);p(n),c(URL.createObjectURL(e.data))}))}};return j.addEventListener("dataavailable",e),function(){return j.removeEventListener("dataavailable",e)}}s&&function(){return y.apply(this,arguments)}().then(b,console.error)}),[j,s]);return[n,s,function(){l(!0)},function(){l(!1)},O]},C=n(2),w=function(e){var t=N(),n=Object(r.a)(t,5),c=n[0],i=n[1],o=n[2],l=n[3],d=n[4];return Object(a.useEffect)((function(){d?(console.log("Raw data ready."),e.sets(d)):console.log("No current audio.")}),[d]),Object(C.jsx)("div",{className:"Recorder",id:"recorder",ref:e.forwardedRef,children:Object(C.jsxs)(s.a,{container:!0,children:[Object(C.jsx)("audio",{src:c,controls:!0}),Object(C.jsx)(u.a,{onClick:o,disabled:i,children:"start"}),Object(C.jsx)(u.a,{onClick:l,disabled:!i,children:"stop"})]})})},S=function(e){return Object(C.jsx)("div",{className:"Player",children:Object(C.jsx)("audio",{controls:!0,src:e.url})})};x.a.defaults.xsrfCookieName="csrftoken",x.a.defaults.xsrfHeaderName="X-CSRFToken";var k=function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()({method:"post",url:"/api/process/",data:t,headers:{"Content-Type":"application/octet-stream"},transformRequest:[function(e){return console.log("hello from transform"),JSON.stringify(e)}],transformResponse:[function(e){return console.log("hello from response"),JSON.parse(e)}]});case 2:return n=e.sent,console.log("Asychronous response"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){for(var t=e.x_y||[],n=0;n<t.length;n++)0===t[n].x&&(t[n].x=NaN),0===t[n].y&&(t[n].y=NaN);return t},H=n(8),I=n(34);I.a.register.apply(I.a,Object(H.a)(I.b));var E=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){var n=t.current.getContext("2d");new I.a(n,{type:"scatter",data:{datasets:[{label:"Pitch Frequency",data:e.data,borderWidth:1,backgroundColor:"rgb(255, 99, 132)"}]},options:{scales:{y:{},x:{}}}})}),[]),Object(C.jsx)("canvas",{id:"question-data",ref:t})},W=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"row",minWidth:"100vw",minHeight:"80vh",display:"flex-box",elevation:3,alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"},chart:{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",minHeight:"40%",marginBottom:"1vh",minWidth:"35vw"}}})),D=Object(b.g)((function(e){var t=W(),n=Object(a.useState)({}),c=Object(r.a)(n,2),i=c[0],o=c[1],d=Object(a.useState)(!0),j=Object(r.a)(d,2),b=(j[0],j[1],Object(a.useState)(!0)),f=Object(r.a)(b,2),h=f[0],O=f[1],p=Object(a.useState)(),m=Object(r.a)(p,2),x=(m[0],m[1],Object(a.useState)()),v=Object(r.a)(x,2);v[0],v[1],Object(a.useRef)(null),Object(a.useRef)(null);return Object(a.useEffect)((function(){null===i?console.log("No changes recorded"):console.log("Processed data changed:",i)}),[i]),Object(C.jsx)("div",{className:t.content,children:Object(C.jsx)(l.a,{className:t.paper,children:Object(C.jsxs)(s.a,{container:!0,className:t.grid,children:[Object(C.jsxs)(s.a,{item:!0,children:[Object(C.jsx)(l.a,{id:"question-data-container",className:t.chart,children:Object(C.jsx)(E,{data:[]})}),Object(C.jsx)(S,{url:"https://intonation-trainer.s3.us-east-2.amazonaws.com/test-audio.mp3"})]}),Object(C.jsxs)(s.a,{item:!0,children:[Object(C.jsx)(l.a,{id:"response-data-container",className:t.chart,children:h?Object(C.jsx)(g.a,{}):Object(C.jsx)(E,{data:i})}),Object(C.jsx)(w,{sets:function(e){!function(e){console.log(h),k(e).then((function(e){var t=R(e.data);o(t),O(!1)}))}(e),O(!0)}})]}),Object(C.jsx)(s.a,{item:!0,children:Object(C.jsx)(u.a,{variant:"outlined",onClick:function(){},children:"Welcome"})})]})})})})),F=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"row",minWidth:"100vw",minHeight:"80vh",display:"flex-box",elevation:3,alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"},chart:{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",minHeight:"40%",marginBottom:"1vh",minWidth:"35vw"}}})),A=Object(b.g)((function(e){var t=F(),n=Object(a.useState)({}),c=Object(r.a)(n,2),i=c[0],o=c[1],d=Object(a.useState)(!0),j=Object(r.a)(d,2),b=(j[0],j[1],Object(a.useState)(!0)),f=Object(r.a)(b,2),h=f[0],O=f[1],p=Object(a.useState)(),m=Object(r.a)(p,2),x=(m[0],m[1],Object(a.useState)()),v=Object(r.a)(x,2);v[0],v[1],Object(a.useRef)(null),Object(a.useRef)(null);return Object(a.useEffect)((function(){null===i?console.log("No changes recorded"):console.log("Processed data changed:",i)}),[i]),Object(C.jsx)("div",{className:t.content,children:Object(C.jsx)(l.a,{className:t.paper,children:Object(C.jsxs)(s.a,{container:!0,className:t.grid,children:[Object(C.jsxs)(s.a,{item:!0,children:[Object(C.jsx)(l.a,{id:"question-data-container",className:t.chart,children:Object(C.jsx)(E,{data:[]})}),Object(C.jsx)(S,{url:"https://intonation-trainer.s3.us-east-2.amazonaws.com/test-audio.mp3"})]}),Object(C.jsxs)(s.a,{item:!0,children:[Object(C.jsx)(l.a,{id:"response-data-container",className:t.chart,children:h?Object(C.jsx)(g.a,{}):Object(C.jsx)(E,{data:i})}),Object(C.jsx)(w,{sets:function(e){!function(e){console.log(h),k(e).then((function(e){var t=R(e.data);o(t),O(!1)}))}(e),O(!0)}})]}),Object(C.jsx)(s.a,{item:!0,children:Object(C.jsx)(u.a,{variant:"outlined",onClick:function(){},children:"Welcome"})})]})})})})),B=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"center",spacing:"0",alignItems:"center",direction:"column",minHeight:"100%"}}})),P=Object(b.g)((function(e){var t=Object(a.useState)("/"),n=Object(r.a)(t,2),c=n[0],i=n[1],o=Object(a.useRef)(),b=B();return Object(a.useEffect)((function(){var e=o.current.setAttribute("href","/production-task");console.log(e),i("/production-task")}),[]),Object(C.jsx)("div",{className:b.content,children:Object(C.jsxs)(l.a,{className:b.paper,children:[Object(C.jsx)(s.a,{container:!0,className:b.grid,children:Object(C.jsx)(d.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})}),Object(C.jsx)(f.a,{className:b.container,children:Object(C.jsx)(j.a,{className:b.button,ref:o,to:c,style:{textDecoration:"none"},children:Object(C.jsx)(u.a,{variant:"outlined",children:"Enter"})},"")})]})})})),L=Object(o.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"center",spacing:"0",alignItems:"center",direction:"column",minHeight:"100%"}}})),q=Object(b.g)((function(e){var t=L();return Object(C.jsx)("div",{className:t.content,children:Object(C.jsxs)(l.a,{className:t.paper,children:[Object(C.jsx)(s.a,{container:!0,className:t.grid,children:Object(C.jsx)(d.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})}),Object(C.jsx)(f.a,{className:t.container,children:Object(C.jsx)(j.a,{className:t.button,to:"/production-task",style:{textDecoration:"none"},children:Object(C.jsx)(u.a,{variant:"outlined",children:"Enter"})},"")})]})})}));function T(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(b.a,{children:Object(C.jsxs)(b.d,{children:[Object(C.jsx)(b.b,{exact:!0,path:"/",component:P}),Object(C.jsx)(b.b,{path:"/production-task",component:A}),Object(C.jsx)(b.b,{path:"/perception-task",component:D}),Object(C.jsx)(b.b,{exact:!0,path:"/done",component:q})]})})})}var J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};i.a.render(Object(C.jsx)(T,{}),document.getElementById("root")),J()},76:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.f47bbdaf.chunk.js.map