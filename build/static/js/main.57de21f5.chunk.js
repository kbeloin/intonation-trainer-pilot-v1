(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(26),i=n.n(c),r=(n(119),n(269)),s=n(272),o=n(271),l=n(275),u=n(273),d=n(32),j=n(4),b=n(274),f=n(2),p=Object(r.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"center",spacing:"0",alignItems:"center",direction:"column",minHeight:"100%"}}})),h=Object(j.g)((function(e){var t=p();return Object(f.jsx)("div",{className:t.content,children:Object(f.jsxs)(o.a,{className:t.paper,children:[Object(f.jsx)(s.a,{container:!0,className:t.grid,children:Object(f.jsx)(u.a,{variant:"h1",component:"h2",gutterBottom:!0,children:"Welcome"})}),Object(f.jsx)(b.a,{className:t.container,children:Object(f.jsx)(d.a,{className:t.button,to:"/2",style:{textDecoration:"none"},children:Object(f.jsx)(l.a,{variant:"outlined",children:"Enter"})},"")})]})})})),O=n(8),m=n(67),g=n.n(m),v=n(103),x={audioBitsPerSecond:16e3};function y(){return(y=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:return t=e.sent,e.abrupt("return",new MediaRecorder(t,x));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=Object(a.useState)(""),t=Object(O.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),r=Object(O.a)(i,2),s=r[0],o=r[1],l=Object(a.useState)(null),u=Object(O.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(null),f=Object(O.a)(b,2),p=f[0],h=f[1];Object(a.useEffect)((function(){if(null!==d){s?d.start():d.stop();var e=function(e){console.log(e.data);var t=new Blob([e.data]),n=new AudioContext,a=new FileReader;a.readAsArrayBuffer(t),a.onloadend=function(){n.decodeAudioData(a.result).then((function(t){var n=t.getChannelData(0);console.log(t),h(n),c(URL.createObjectURL(e.data))}))}};return d.addEventListener("dataavailable",e),function(){return d.removeEventListener("dataavailable",e)}}s&&function(){return y.apply(this,arguments)}().then(j,console.error)}),[d,s]);return[n,s,function(){o(!0)},function(){o(!1)},p]},N=n(48),w=n.n(N);w.a.defaults.xsrfCookieName="csrftoken",w.a.defaults.xsrfHeaderName="X-CSRFToken";var S=Object(r.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"column",minWidth:"100vw",minHeight:"80vh",display:"flex",elevation:3,justifyContent:"center",alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},grid:{display:"flex",justifyContent:"space-evenly",spacing:"2"},chart:{height:"100px",border:"black"}}})),R=function(e){var t=C(),n=Object(O.a)(t,5),c=n[0],i=n[1],r=n[2],o=n[3],u=n[4],d=Object(a.useRef)(),j=S(),b=d.current;b&&b.addEventListener("canplaythrough",(function(t){u&&e.sets(u)}));return Object(f.jsx)("div",{className:"Recorder",id:"recorder",ref:e.forwardedRef,children:Object(f.jsxs)(s.a,{container:!0,className:j.grid,children:[Object(f.jsx)("audio",{src:c,ref:d,controls:!0}),Object(f.jsx)(l.a,{onClick:r,disabled:i,children:"start"}),Object(f.jsx)(l.a,{onClick:o,disabled:!i,children:"stop"})]})})};function D(){return Object(f.jsx)("div",{className:"Player",style:{marginRight:"100px"},children:Object(f.jsx)("audio",{controls:!0,src:"https://intonation-trainer.s3.us-east-2.amazonaws.com/test-audio.mp3"})})}n(254);var k=n(9),E=n(15);E.a.register.apply(E.a,Object(k.a)(E.c));var H=function(e){var t=e.data||[],n=t.time,a=t.pitch,c=n.map((function(e,t){return{x:e,y:a[t]}}));return console.log(c),c},I=function(e,t){var n=e.getContext("2d");return new E.a(n,{type:"scatter",data:{datasets:[{label:"Pitch Frequency",data:t,borderWidth:1,backgroundColor:"rgb(255, 99, 132)"}]},options:{scales:{y:{},x:{}}}})},B=Object(r.a)((function(e){return{content:{justifyContent:"center",display:"flex"},paper:{padding:e.spacing(2),flexDirection:"row",minWidth:"100vw",minHeight:"80vh",display:"flex-box",elevation:3,alignItems:"center"},container:{position:"relative",height:"100%",justifyContent:"center"},button:{position:"absolute",bottom:"0",right:"0"},grid:{height:"50%",justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"100%"},chart:{justifyContent:"space-evenly",spacing:"0",alignItems:"flex-end",direction:"column",minHeight:"40%",marginBottom:"1vh",minWidth:"35vw"}}})),L=function(){try{return document.cookie.split("; ").find((function(e){return e.startsWith("csrftoken=")})).split("=")[1]}catch(e){console.log(e)}},F=Object(j.g)((function(e){var t=Object(a.useState)(),n=Object(O.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(),u=Object(O.a)(r,2),d=u[0],j=u[1],b=Object(a.useState)(null),p=Object(O.a)(b,2),h=p[0],m=p[1],g=Object(a.useState)(),v=Object(O.a)(g,2),x=(v[0],v[1]),y=Object(a.useState)(),C=Object(O.a)(y,2),N=(C[0],C[1]),w=B(),S=Object(a.useRef)(null),k=Object(a.useRef)(null);return Object(a.useEffect)((function(){void 0===c?console.log("None"):function(e){console.log(d),document.getElementById("responseData").remove();var t=document.createElement("canvas");t.setAttribute("id","responseData"),document.getElementById("responseDataContainer").append(t);var n=new XMLHttpRequest;n.open("POST","/api/process/",!0),n.setRequestHeader("X-CSRFToken",L()),n.setRequestHeader("Content-Type","application/octet-stream"),n.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE&&200===this.status){var e=JSON.parse(n.responseText);I(t,H(e)),m(e)}},n.send(JSON.stringify(e))}(c)}),[c]),Object(a.useEffect)((function(){console.log(h)}),[h]),Object(a.useEffect)((function(){x(I(k.current,[])),N(I(S.current,[]))}),[]),Object(f.jsx)("div",{className:w.content,children:Object(f.jsx)(o.a,{className:w.paper,children:Object(f.jsxs)(s.a,{container:!0,className:w.grid,children:[Object(f.jsxs)(s.a,{item:!0,children:[Object(f.jsx)(o.a,{className:w.chart,children:Object(f.jsx)("canvas",{id:"questionData",ref:k})}),Object(f.jsx)(D,{})]}),Object(f.jsxs)(s.a,{item:!0,children:[Object(f.jsx)(o.a,{id:"responseDataContainer",className:w.chart,children:Object(f.jsx)("canvas",{id:"responseData",ref:S})}),Object(f.jsx)(R,{sets:j})]}),Object(f.jsx)(s.a,{item:!0,children:Object(f.jsx)(l.a,{variant:"outlined",onClick:function(){i(d)},children:"Welcome"})})]})})})}));function W(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(j.a,{children:Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{exact:!0,path:"/",component:h}),Object(f.jsx)(j.b,{path:"/2",component:F})]})})})}var T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};i.a.render(Object(f.jsx)(W,{}),document.getElementById("root")),T()}},[[253,1,2]]]);
//# sourceMappingURL=main.57de21f5.chunk.js.map