{"version":3,"sources":["components/utils/responseHelper.js","components/elements/AudioCharts.js","components/utils/useRecorder.js","components/elements/Recorder.js","components/pages/Welcome.js","components/elements/Player.js","components/utils/processAudio.js","components/utils/remainingAttempts.js","components/pages/PerceptionIdentificationTonesTemplate.js","components/pages/Instructions.js","components/pages/ProductionControlledTemplate.js","components/pages/PerceptionDiscriminationTemplate.js","components/elements/WordList.js","components/pages/PerceptionIdentificationProminenceTemplate.js","components/pages/End.js","components/pages/ProductionGuidedTemplate.js","App.js","index.js"],"names":["axios","defaults","xsrfCookieName","xsrfHeaderName","getResponses","data","a","method","url","params","response","console","log","submitResponse","Chart","register","registerables","PitchChart","props","chartRef","useRef","useEffect","ctx","current","getContext","type","datasets","label","borderWidth","backgroundColor","options","scales","y","x","id","ref","audioBitsPerSecond","AudioContext","FileReader","navigator","mediaDevices","getUserMedia","audio","stream","MediaRecorder","useRecorder","useState","audioURL","setAudioURL","isRecording","setIsRecording","recorder","setRecorder","rawData","setRawData","start","stop","handleData","e","reader","readAsArrayBuffer","onloadend","decodeAudioData","result","then","decodedData","view","getChannelData","URL","createObjectURL","addEventListener","removeEventListener","requestRecorder","error","Recorder","startRecording","stopRecording","sets","className","forwardedRef","Grid","container","src","controls","Button","onClick","disabled","useStyles","makeStyles","theme","content","justifyContent","display","paper","padding","spacing","minWidth","minHeight","elevation","position","withRouter","newUser","code","setCode","sentenceData","history","useHistory","nextTask","push","classes","undefined","Paper","direction","alignItems","item","xs","Fade","in","Typography","variant","component","gutterBottom","Stack","TextField","autoFocus","margin","value","onChange","target","message","res","createTrial","Player","processAudioData","headers","transformRequest","JSON","stringify","transformResponse","parse","getPitchScatterData","processedData","i","length","NaN","remainingAttempts","num","height","correct","showCorrect","incorrect","showIncorrect","trial","setTrial","getResponse","evaluateTone","currentTarget","request","eval","response_id","alignContent","alignSelf","marginRight","trial_id","text","instructions_short","sentence","filepath","Box","style","width","Collapse","Alert","action","IconButton","aria-label","color","size","sx","mb","Icon","severity","task_id","TaskOneInstructions","open","setOpen","Backdrop","zIndex","drawer","maxWidth","Instructions","margins","grid","button","bottom","right","chart","marginBottom","setProcessedData","isLoading","toggleLoading","instructionRef","exampleRef","evaluate","nextTrial","childExampleRef","childInstructionRef","pitch","CircularProgress","pitchData","handleAudioChange","polite","setPolite","prominent","setProminent","sentenceA","setA","sentenceB","setB","marginLeft","ToggleButtonGroup","orientation","exclusive","event","nextView","ToggleButton","fullWidth","trial_target","TaskThreeInstructions","Item","styled","typography","body2","textAlign","palette","secondary","WordList","callback","wordList","setWordList","force","word","setWord","newList","concat","toLowerCase","v4","map","filter","handleRemove","showForcedForward","attempts","setAttempts","words","setWords","isSubmitted","Evaluate","Set","forEach","add","prominent_words","split","has","b","Next","nextTaskId","nextType","nextTrialId","nextResponseId","TaskTwoInstructions","flexDirection","setValue","submitted","textContent","instructions","example_text","alert","m","noValidate","autoComplete","multiline","maxRows","userResponse","Submit","TaskFourInstructions","App","exact","path","Welcome","PerceptionIdentificationTonesTemplate","PerceptionDiscriminationTemplate","PerceptionIdentificationProminenceTemplate","ProductionControlledTemplate","ProductionGuidedTemplate","End","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d4c21125.chunk.js","sourcesContent":["import axios from \"axios\";\n\naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\nexport const getResponses = async (data) => {\n    const response = await axios({\n        method: \"post\",\n        url: \"/api/get-responses/\",\n        data: { params: data }\n    });\n    console.log(data)\n    console.log(response)\n    return response\n}\n\nexport const createTrial = async (data) => {\n    const response = await axios({\n        method: \"get\",\n        url: \"/api/get-responses/\",\n        data:data\n    });\n    console.log(\"Created experiment\")\n    return response\n}\n\n\nexport const submitResponse = async (data) => {\n        const response = await axios({\n            method: \"post\",\n            url: \"/api/submit-response/\",\n            data: data\n        });\n        console.log(\"Submitted response\")\n        return response\n}\n\nexport default submitResponse","import React, { useEffect, useRef } from 'react'\nimport { Chart, registerables } from 'chart.js'\n\n\nChart.register(...registerables);\n\nexport const PitchChart = ( props ) => {\n    let chartRef = useRef()\n    \n    useEffect(() => {\n        let ctx = chartRef.current.getContext('2d')\n\n        let myChart = new Chart(ctx, {\n            type: 'scatter',\n            data: {\n                datasets: [{\n                    label: 'Pitch Frequency',\n                    data: props.data,\n                    borderWidth: 1,\n                    backgroundColor: 'rgb(255, 99, 132)'\n                    }]\n                },\n                options: {\n                    scales: {\n                        y: { },\n                        x: { }\n                    }\n                }\n            });\n        },[])\n\n    return (\n        <canvas id=\"question-data\" ref={chartRef}></canvas>\n    )\n}\n","import { useEffect, useState } from \"react\";\n\nvar options = {\n  audioBitsPerSecond: 16000\n}\n\nconst ctx = new AudioContext();\nconst reader = new FileReader();\n\nconst useRecorder = () => {\n  const [audioURL, setAudioURL] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n  const [recorder, setRecorder] = useState(null);\n  const [rawData, setRawData] = useState(null)\n  \n  useEffect(() => {\n    // Lazily obtain recorder first time we're recording.\n    if (recorder === null) {\n      if (isRecording) {\n        requestRecorder().then(setRecorder, console.error);\n      }\n      return;\n    }\n\n    // Manage recorder state.\n    if (isRecording) {\n      recorder.start();\n    } else {\n      recorder.stop();\n    }\n\n    // Obtain the audio when ready.\n    const handleData = e => {\n      // const blob = new Blob([e.data]);\n      let ctx = new AudioContext();\n      let reader = new FileReader();\n\n      reader.readAsArrayBuffer(e.data);\n      reader.onloadend = () => {\n        console.log('data loaded')\n        ctx.decodeAudioData(reader.result).then(function(decodedData) {\n          console.log(decodedData)\n          const view = decodedData.getChannelData(0) //\n          setRawData(view); // This might be done by \n          setAudioURL(URL.createObjectURL(e.data))//log of base64data is \"data:audio/ogg; codecs=opus;base64,GkX...\"\n       });  \n      }\n    }; \n    recorder.addEventListener(\"dataavailable\", handleData);\n    return () => recorder.removeEventListener(\"dataavailable\", handleData);\n  }, [recorder, isRecording]);\n\n  const startRecording = () => {\n    setIsRecording(true);\n  };\n\n  const stopRecording = () => {\n    setIsRecording(false);\n  };\n\n  return [audioURL, isRecording, startRecording, stopRecording, rawData];\n};\n\nasync function requestRecorder() {\n  const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n  return new MediaRecorder(stream, options);\n}\n\nexport default useRecorder;\n\n\n","\nimport { useEffect } from  'react'\nimport useRecorder from \"../utils/useRecorder\";\nimport { Button, Grid } from '@material-ui/core'\n\nconst Recorder = (props) => {\n  let [audioURL, isRecording, startRecording, stopRecording, rawData] = useRecorder();\n  \n  useEffect(() => {\n    if (rawData) {\n      console.log(\"Raw data ready.\")\n      props.sets(rawData)\n    } else console.log(\"No current audio.\");\n  }, [rawData])\n\n  return (\n    <div className=\"Recorder\" id=\"recorder\" ref={props.forwardedRef}>\n    <Grid container>\n      <audio src={audioURL} controls/>\n      <Button onClick={startRecording} disabled={isRecording}>\n        start\n      </Button>\n      <Button onClick={stopRecording} disabled={!isRecording}>\n        stop\n      </Button>\n      </Grid> \n    </div>\n  );\n}\n\nexport default Recorder;","import React, { useState, useEffect, useRef} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { withRouter, NavLink, useHistory } from 'react-router-dom'\nimport Container from '@material-ui/core/Container'\nimport { getResponses } from '../utils/responseHelper';\nimport axios from 'axios';\nimport FormDialog from '../elements/FormDialog';\nimport Fade from '@mui/material/Fade';\nimport { PitchChart } from '../elements/AudioCharts';\nimport Recorder from '../elements/Recorder';\nimport TextField from '@mui/material/TextField';\nimport Stack from '@mui/material/Stack';\nconst useStyles = makeStyles((theme) => ({\n  content: { \n    justifyContent: \"center\",\n    display: \"flex\"\n  },\n    paper: {\n      padding: theme.spacing(2),\n      \n      minWidth: '100vw',\n      minHeight: '85vh',\n      display:\"flex\",\n      elevation: 3,\n      position: 'relative'\n      \n    },\n    container: {\n        \n    },\n}));\n\naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\nconst Welcome = (props) => {\n  const [currentTask, setCurrentTask] = useState('/')\n  const [newUser, setNewUser] = useState(false)\n  const [code, setCode] = useState(\"\")\n  const taskRef = useRef()\n  const exampleRef = useRef()\n  const sentenceData = [\"id\"]\n  const history = useHistory()\n\n  const createTrial = (code) => {\n    getResponses(sentenceData).then((response) => {\n          console.log(\"Checking if user exists...\")\n\n          const data = response.data\n          if (data?.message === 'Next') { // Anon testing purposes\n              nextTask()\n          }\n          if (data === 'None') {\n            axios({\n              method: \"post\",\n              url: \"/api/create-response-set/\",\n              data: { 'code': code }\n            }).then((res) => {\n              console.log(\"Created response set for user.\")\n              nextTask()\n            })\n          }})\n        // When the user selects Enter, experiement begins. \n        // 1. Trial is created\n        // 2. Responses are intialize  \n      }\n\n  const handleInput = (e) => {\n    setCode(e.target.value)\n  }\n\n  const nextTask = () => {\n    getResponses(sentenceData).then((response) => \n      {\n        console.log(response)\n        const data = response.data\n        console.log(data.type);\n        history.push(`/${data.type}`)\n      // axios.post() // get most recent task\n      });\n  }\n  // Entry point: \n  const classes = useStyles();\n\n  useEffect(() =>{\n    // const nav = taskRef.current.setAttribute('href', '/production-task')\n    // console.log(nav)\n    // setCurrentTask('/production-task/')\n    // console.log('Loaded')\n    getResponses(sentenceData).then((response) => {\n      const data = response.data\n      console.log(data)\n      if (data.type !== undefined) {\n          history.push(`/${data.type}`)\n        }\n\n    })\n    },[])\n\n    return (\n      <div>\n        <Paper className={classes.paper}>\n          <Grid container>\n            <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\" >\n              <Grid  item xs={12}>\n                <Fade in={newUser}>\n                  <Typography variant=\"h1\" component=\"h\" gutterBottom>\n                  </Typography>\n                  </Fade>\n              </Grid>\n            </Grid>\n            <Grid container direction=\"column\" justifyContent=\"flex-end\" alignItems=\"center\" >\n              <Grid  item xs={12}>\n                  <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                      Welcome<br />\n                  </Typography>\n                  <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom><br />\n                    Welcome to the study investigating English intonation and learning. Before starting, please observe the following requirements:\n                    <Stack direction=\"column\" xs={4}> <br />\n                    1. Wear a headset with microphone (or make sure your computer has a microphone).\n                    </Stack>\n                    <Stack direction=\"column\" xs={4}> <br />\n                    2. Please open the experiement in Google Chrome. \n                    </Stack>\n                    <Stack direction=\"column\" xs={4}> <br />\n                    3. You will have three attempts per question; once this number of attempts has been reached, the program will automatically progress.\n                    </Stack>\n                  </Typography> \n              </Grid>\n            </Grid>\n            <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\" >\n            <Stack direction=\"row\" spacing={6} xs={12}>\n            <TextField\n        autoFocus\n        margin=\"dense\"\n        id=\"code\"\n        label=\"Experiment Code\"\n        \n        variant=\"outlined\"\n        value={code}\n        onChange={handleInput}\n            />\n            <Button onClick={ () => {createTrial(code)} }> Enter</Button>\n                </Stack>\n            </Grid>\n            </Grid>\n            \n        </Paper>\n        </div>\n        );\n    }\n\nexport default withRouter(Welcome);\n\n","import React from 'react'\n\nconst Player = (props) => {\n    return (\n        <div className=\"Player\">\n            <audio controls src={props.url}/>\n        </div>\n    )\n}\n\nexport default Player\n","import { getCSRF } from './csrfHelper.js'\nimport axios from 'axios'\n\naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\nexport const processAudioData = async (data) => {\n    const response = await axios({\n        method: \"post\",\n        url: \"/api/process/\",\n        data: data,\n        headers: {\"Content-Type\": \"application/octet-stream\"},\n        transformRequest: [(data) => {\n            return JSON.stringify(data);\n        }],\n        transformResponse: [(data) => {\n            return JSON.parse(data);\n        }]\n    });\n    return response\n}\n\nexport const getPitchScatterData = (processedData) => {\n    console.log(processedData)\n    let data = processedData['x_y'] || []\n    for (let i = 0; i < data.length; i++) {\n        if (data[i]['x'] === 0) {\n            data[i]['x'] = NaN;\n        }\n        if (data[i]['y'] === 0) {\n            data[i]['y'] = NaN;\n        }\n      }\n\n    return data\n}\n\nexport default processAudioData","\n\nconst remainingAttempts = (num) => {\n    var x = num % 3\n    if (x === 0) {\n        var x = x + 3\n        return x\n    } return x\n}\n\nexport default remainingAttempts","import React, {useState, useEffect, useRef} from 'react'\nimport axios from 'axios'\nimport { makeStyles } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Fade from '@material-ui/core/Fade';\nimport Typography from '@material-ui/core/Typography';\nimport Player from '../elements/Player';\nimport Button from '@material-ui/core/Button'\nimport Stack from '@mui/material/Stack';\nimport Box from '@mui/material/Box';\nimport Alert from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport Collapse from '@mui/material/Collapse';\nimport { getResponses, submitResponse } from '../utils/responseHelper';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport Icon from '@mui/material/Icon'\nimport remainingAttempts from '../utils/remainingAttempts'\nimport Instructions from './Instructions'\nimport Backdrop from '@mui/material/Backdrop'\n\n\nconst useStyles = makeStyles((theme) => ({\n    content: { \n      justifyContent: \"center\",\n      display: \"flex\"\n    },\n      paper: {\n        padding: theme.spacing(2),\n        justifyContent: 'center',\n        minWidth: '100vw',\n        height: '85vh',\n        display:\"flex\",\n        elevation: 3,\n        position: 'relative'\n        \n      },\n  }));\n\n  \naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n  \n\nexport const PerceptionIdentificationTonesTemplate = () => {\n    const [correct, showCorrect] = useState(false);\n    const [incorrect, showIncorrect] = useState(false);\n    const [trial, setTrial] = useState(null);\n    const sentenceData = [\"id\",\"filepath\",\"intonation\"]\n    const history = useHistory()\n    const instructionRef = useRef()\n\n    const classes = useStyles();\n\n    const getResponse = () => {\n        showCorrect(false)\n        showIncorrect(false)\n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)});\n    }\n\n    const evaluateTone = (e) => {\n        let target = e.currentTarget.value\n        if (target === trial.target) {\n            showCorrect(true)\n            console.log(target)\n            let request = { eval: 1, response: target, response_id: trial.response_id }\n            submitResponse(request)\n            return\n        }\n        showIncorrect(true)\n        let request = { eval: 0, response: target, response_id: trial.response_id }\n        submitResponse(request)\n    }\n\n    const nextTrial = () => {\n        let request = [\"id\"]\n        getResponses(request).then((response) => {\n                    const data = response.data\n                    if (data.task_id != trial.task_id) {\n                        console.log(\"Task completed. Moving to next task\")\n                        history.push(`/${data.type}`)\n                    }\n                    if (data.trial_id != trial.trial_id) {\n                        console.log(\"Trial completed. Moving to next trial\")\n                        getResponse();\n                    } else {\n                        setTrial(data)\n                    };\n                });\n            };\n            \n\n    useEffect( () => {\n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)\n        \n        })\n    },[]);\n\n    return (\n        <div>\n            \n        <Paper className={classes.paper}>\n  \n              \n            <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={5}>\n            <Stack direction=\"row\" justifyContent=\"flex-start\" alignItems=\"baseline\" alignContent=\"center\" spacing={5}>\n                <TaskOneInstructions/>\n                <Typography alignSelf={'flex-start'} marginRight={'50px'} variant='body1' component=\"h2\" gutterBottom xs={3}>\n                    {trial ?  \"Question ID: \" + trial.trial_id + \" | Attempt: \" + remainingAttempts(trial.response_id) + \" of 3\" : null }\n                </Typography>\n           \n            </Stack>\n                <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                      {!trial ? \"Loading...\" : trial.text.instructions_short} \n                  </Typography>\n                <Player url={trial ? trial.sentence.filepath : null}/>\n                <Box style={{width: \"100%\"}}>\n                    <Collapse in={correct}>\n                        <Alert\n                        action={\n                            <IconButton\n                            aria-label=\"close\"\n                            color=\"inherit\"\n                            size=\"small\"\n                            >\n                            </IconButton>\n                        }\n                        sx={{ mb: 2 }}\n                        >\n                        Well done! Click next to continue.\n                        </Alert>\n                    </Collapse>\n                    <Collapse in={incorrect}>\n                        <Alert\n                        action={\n                            <IconButton aria-label=\"close\" color=\"error\" size=\"small\" onClick={() => { getResponse()}}>\n                                <Icon>close</Icon>\n                            </IconButton>\n                            }\n                        severity=\"error\"\n                        sx={{ mb: 2 }}\n                        >\n                        Try again! Remember to listen to the tone choice at the <u>end</u> of the word.\n                        </Alert>\n                    </Collapse>\n                </Box>\n                <Stack direction=\"row\" spacing={18} xs={12}>\n                    <Button variant=\"outlined\" size=\"large\" onClick={(e)=> evaluateTone(e)} value=\"rising\" disabled={correct || incorrect}>\n                        Rising\n                    </Button>\n                    <Button variant=\"outlined\" size=\"large\" onClick={(e)=> evaluateTone(e)} value=\"level\" disabled={correct || incorrect}>\n                        Level\n                    </Button>\n                    <Button variant=\"outlined\" size=\"large\" onClick={(e)=> evaluateTone(e)} value=\"falling\" disabled={correct || incorrect}>\n                        Falling\n                    </Button>\n                </Stack>\n            </Stack>\n            <Button size=\"large\"variant=\"contained\" style={{alignSelf:\"flex-end\"}} onClick={() =>{nextTrial()}}  disabled={!correct}>Next</Button>\n        </Paper>\n        </div>\n    )\n}\n\n\n\nexport default withRouter(PerceptionIdentificationTonesTemplate);\n\n\nexport const TaskOneInstructions = () => {\n    const classes = useStyles();\n\n    const [open, setOpen] = useState(true);\n\n    const handleClose = () => {\n      setOpen(false);\n    };\n\n    const handleToggle = () => {\n      setOpen(!open);\n    };\n    \n    return (\n        <div>\n            <IconButton aria-label=\"close\" color=\"info\" size=\"small\" onClick={() => handleToggle()}>\n                            <Icon>help</Icon>\n                        </IconButton>\n            <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 2 }}\n        open={open}\n        onClick={handleClose}\n      >\n        <Paper style={{maxWidth:\"1100px\", padding:\"3%\"}} justifyContent='center'\n        minWidth='95vw'\n        height= '50vh'\n        display='flex'\n        elevation={3}\n        position='relative'\n        >\n        <Box>\n                <Stack direction=\"column\">\n                \n                <Stack direction=\"row\">\n                    Task 1. Listening.<br />\n                    \n                    </Stack>\n                    <Stack direction=\"row\"><br />\n                    In this task, you will listen to requests spoken with different intonations.<br /><br />For each request, you will identify the tone choice AT THE END of the sentence, where the request is happening.\n                    </Stack><br />\n                    <Stack direction=\"row\"><br />\n                    In English, there are three general types of intonation.\n                    </Stack><br /><br />\n                    <Stack direction=\"row\">\n                    <b>Falling</b> = the voice at the end of the request goes down.<br />\n                    <b>Rising</b> = the voice at the end of the request goes down.<br />\n                    <b>Level</b> = the voice does not go up or down.<br />\n                    </Stack>\n                    </Stack>\n                </Box>\n            </Paper>\n      </Backdrop>\n        </div>\n    )\n}\n\n\n","import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\nimport { makeStyles } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Fade from '@material-ui/core/Fade';\nimport Typography from '@material-ui/core/Typography';\nimport Player from '../elements/Player';\nimport Button from '@material-ui/core/Button'\nimport Stack from '@mui/material/Stack';\nimport Box from '@mui/material/Box';\nimport Alert from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport Collapse from '@mui/material/Collapse';\nimport { getResponses, submitResponse } from '../utils/responseHelper';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport Icon from '@mui/material/Icon'\nimport Backdrop from '@mui/material/Backdrop'\n\nimport CircularProgress from '@mui/material/CircularProgress';\nimport PerceptionIdentificationTonesTemplate from './PerceptionIdentificationTonesTemplate';\n\nconst useStyles = makeStyles((theme) => ({\n      paper: {\n        padding: theme.spacing(2),\n        justifyContent: 'center',\n        minWidth: '100vw',\n        height: '40vh',\n        display:\"flex\",\n        elevation: 3,\n        position: 'relative'\n        \n      },\n  }));\n\n  \naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n\n\nexport const Instructions = (props) => {\n    const classes = useStyles();\n\n    const [open, setOpen] = useState(true);\n\n    const handleClose = () => {\n      setOpen(false);\n    };\n\n    const handleToggle = () => {\n      setOpen(!open);\n    };\n    \n    return (\n        <div>\n            <IconButton aria-label=\"close\" color=\"info\" size=\"small\" onClick={() => handleToggle()}>\n                            <Icon>help</Icon>\n                        </IconButton>\n            <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 2 }}\n        open={open}\n        onClick={handleClose}\n      >\n        <Paper style={{maxWidth:\"1100px\", margins:\"10px\"}}>\n                <Stack direction=\"column\">\n                    <Stack direction=\"row\">\n                    <Typography>\n                Task 1. Listening. \n                    </Typography>\n                    </Stack>\n                <Stack direction=\"row\">\n                <Typography>\n                    In this task, you will listen to requests spoken with different intonations.{\"\\n\"} For each request, you will identify the tone choice AT THE END of the sentence, where the request is happening.\n                    {\"\\n\"}\n                    In English, there are three general types of intonation.{\"\\n\"}\n                <b>Falling</b> = the voice at the end of the request goes down.{\"\\n\"}\n                <b>Rising</b> = the voice at the end of the request goes down.{\"\\n\"}\n                <b>Level</b> = the voice does not go up or down.{\"\\n\"}\n                </Typography>\n                </Stack>\n                </Stack>\n            </Paper>\n      </Backdrop>\n        </div>\n    )\n}\n\n\n\nexport default Instructions;","import React, { useState, useEffect, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { CircularProgress } from '@mui/material';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport Recorder from '../elements/Recorder'\nimport Player from '../elements/Player';\nimport { processAudioData, getPitchScatterData } from '../utils/processAudio.js'\nimport { submitResponse } from '../utils/responseHelper'\nimport { PitchChart } from '../elements/AudioCharts';\nimport { getResponses } from '../utils/responseHelper';\nimport Stack from '@mui/material/Stack';\nimport Box from '@mui/material/Box';\nimport Alert from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport Collapse from '@mui/material/Collapse';\nimport Icon from '@mui/material/Icon'\nimport remainingAttempts from '../utils/remainingAttempts';\nimport Instructions from './Instructions';\n\n\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        padding: theme.spacing(2),\n        justifyContent: 'center',\n        minWidth: '95vw',\n        height: '85vh',\n        display:\"flex\",\n        elevation: 3,\n        position: 'relative',\n        \n    },\n    container: {\n        position: 'relative',\n        height: '100%',\n        justifyContent: \"center\"\n    },\n    grid: {\n        height: \"50%\",\n        justifyContent:\"space-evenly\",\n        spacing:\"0\",\n        alignItems:\"center\",\n        direction:\"column\",\n        minHeight:\"100%\"\n    },\n    button: {\n        position: 'absolute',\n        bottom:'50px',\n        right: '50px'\n    },\n    chart: {\n        justifyContent:\"center\",\n        alignItems:\"center\",\n        direction:\"column\",\n        minHeight:\"100%\",\n        marginBottom: \"1vh\",\n        minWidth:\"30vw\",\n    }\n}));\n\nconst ProductionControlledTemplate = (props) => {\n    const classes = useStyles();\n    let [processedData, setProcessedData] = useState(null)\n\n    let [trial, setTrial] = useState(null)\n    let [isLoading, toggleLoading] = useState(false)\n    let [correct, showCorrect] = useState(false)\n    let [incorrect, showIncorrect] = useState(false)\n    let sentenceData = [\"id\",\"filepath\",\"pitch\"]\n    let instructionRef = useRef()\n    let exampleRef = useRef()\n    let history = useHistory()\n\n    const getResponse = () => {\n        showCorrect(false)\n        showIncorrect(false)\n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)});\n    }\n\n    \n    let handleAudioChange = (data) => {\n        const audio = data\n        const response_id = trial.response_id\n\n        const requestData = {\"audio\":audio, \"response_id\":response_id}\n        // let newCanvas = resetCanvas('response-data', 'response-data-container', chartB)\n        processAudioData(requestData).then((response) => { \n            let pitchData = getPitchScatterData(response.data)\n            // setChartB(newPitchChart(newCanvas, pitchData, chartB)) // Destroys chart / resets element\n            setProcessedData(pitchData)\n            toggleLoading(false)});\n            evaluate()\n        }\n\n    const evaluate = () => {\n        \n        if (processedData) {\n            showCorrect(true)\n            \n            let request = { eval: 1, response: {data: processedData}, response_id: trial.response_id }\n            submitResponse(request)\n            nextTrial()\n            return\n        } else {\n\n        showIncorrect(true)\n        let request = { eval: 0, response: \"\", response_id: trial.response_id }\n        submitResponse(request)\n        }\n    }\n    const nextTrial = () => {\n        let request = sentenceData\n        getResponses(request).then((response) => {\n                    const data = response.data\n                    console.log(data)\n                    if (data.task_id != trial.task_id) {\n                        console.log(\"Task completed. Moving to next task\")\n                        history.push(`/${data.type}`)\n                    }\n                    if (data.trial_id != trial.trial_id) {\n                        console.log(\"Trial completed. Moving to next trial\")\n                        getResponse()\n                    }\n                    else {\n                        setTrial(data)\n                    }\n                })\n            }\n\n    useEffect( () => {\n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)\n        });\n    },[]);\n\n    return (\n            <div>\n                <Stack direction=\"row\" justifyContent=\"flex-start\" alignItems=\"baseline\" alignContent=\"center\" spacing={5}>\n                <Instructions childExampleRef={exampleRef} childInstructionRef={instructionRef}/>\n                <Typography alignSelf={'flex-start'} marginRight={'50px'} variant='body1' component=\"h2\" gutterBottom xs={3}>\n                    {trial ?  \"Question ID: \" + trial.trial_id + \" | Attempt: \" + remainingAttempts(trial.response_id) + \" of 3\"  : null }\n                </Typography> \n                </Stack>\n                <Paper className={classes.paper}>\n                    \n                    <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={5}>\n                        <Typography marginRight={'50px'} variant=\"body1\" component=\"h1\" gutterBottom>\n                            {trial ? trial.text.instructions_short : \"Loading...\"} \n                        </Typography>\n                        <Stack direction=\"column\"  spacing={5}>\n                            <Stack direction=\"row\" justifyContent=\"center\" alignItems=\"center\" spacing={5} xs={6}>\n                                { trial ? \n                                <Paper id=\"question-data-container\" className={classes.chart}>  \n                                    <PitchChart data={getPitchScatterData(trial.sentence.pitch)}/> \n                                </Paper>\n                                :\n                                <Paper id=\"response-data-container\" className={classes.chart}>\n                                    <CircularProgress/> \n                                </Paper>}\n                                {isLoading ? \n                                <Paper id=\"response-data-container\" className={classes.chart}>\n                                    <CircularProgress/> \n                                </Paper>\n                                :   \n                                <Paper id=\"response-data-container\" className={classes.chart}>\n                                    <PitchChart data={processedData}/>\n                                </Paper>}\n                                </Stack>\n                                <Stack direction=\"row\" spacing={22} xs={12}>\n                                    <Stack direction=\"column\" justifyContent=\"flex-start\" alignItems=\"flex-start\" alignContent=\"flex-start\"spacing={15} xs={12}> \n                                        <Player url={ trial ? trial.sentence.filepath : null}></Player>\n                                    </Stack>\n                                        <Stack direction=\"column\" justifyContent=\"flex-end\" alignItems=\"flex-end\" alignContent=\"flex-end\"spacing={12} xs={6}> \n                                            <Recorder alignSelf=\"flex-end\" sets={(data) => {handleAudioChange(data); toggleLoading(true);} }/>\n                                        </Stack>\n                                    </Stack>\n                                </Stack>\n                            </Stack>\n                        <Stack direction=\"row\" justifyContent=\"flex-start\" alignItems=\"flex-start\" spacing={5}>    \n                    <Button className={classes.button} variant=\"outlined\" onClick={() => {nextTrial()}}>Next</Button>\n                </Stack>\n            </Paper>\n        </div>\n        );\n    }\n\nexport default withRouter(ProductionControlledTemplate)\n\n","import React, {useState, useEffect, useRef} from 'react'\nimport axios from 'axios'\nimport { makeStyles } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Player from '../elements/Player';\nimport Button from '@material-ui/core/Button'\nimport Stack from '@mui/material/Stack';\nimport Box from '@mui/material/Box';\nimport Alert from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport Collapse from '@mui/material/Collapse';\nimport { getResponses, submitResponse } from '../utils/responseHelper';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport Icon from '@mui/material/Icon'\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup'\nimport remainingAttempts from '../utils/remainingAttempts';\nimport Backdrop from '@mui/material/Backdrop';\n\nconst useStyles = makeStyles((theme) => ({\n    content: { \n      justifyContent: \"center\",\n      display: \"flex\"\n    },\n      paper: {\n        padding: theme.spacing(2),\n        \n        minWidth: '100vw',\n        height: '85vh',\n        display:\"flex\",\n        elevation: 3,\n        position: 'relative',\n        justifyContent: 'center'\n        \n      },\n  }));\n\nfunction getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n}\n\n\naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n  \nconst PerceptionDiscriminationTemplate = () => {\n    const [correct, showCorrect] = useState(false);\n    const [incorrect, showIncorrect] = useState(false);\n    const [trial, setTrial] = useState(null);\n    const [polite, setPolite] = useState(null)\n    const [prominent, setProminent] = useState(null)\n    const [sentenceA, setA] = useState(null)\n    const [sentenceB, setB] = useState(null)\n    const instructionRef = useRef()\n    const exampleRef = useRef()\n\n    const sentenceData = [\"id\",\"filepath\"]\n    const history = useHistory()\n    \n\n\n\n    const classes = useStyles();\n\n    const getResponse = () => {\n        showCorrect(false)\n        showIncorrect(false)\n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)\n            setA(data.sentence[0])\n            setB(data.sentence[1])\n        });\n            \n    }\n\n    const handlePoliteChange = (event, nextView) => {\n        console.log(nextView)\n        setPolite(nextView);\n      };\n\n    const handleProminentChange = (event, nextView) => {\n        console.log(nextView)\n        setProminent(nextView);\n    };\n\n    const evaluate = () => {\n        const target = trial.target\n        const trial_target = prominent\n        console.log(trial_target)\n        console.log(target)\n\n        if (trial_target.id === target) {\n            showCorrect(true)\n            console.log(target)\n            let request = { eval: 1, response: trial_target.id, response_id: trial.response_id }\n            submitResponse(request)\n            return\n            \n            \n        } else {\n\n        showIncorrect(true)\n        let request = { eval: 0, response: trial_target.id, response_id: trial.response_id }\n        submitResponse(request)\n        }\n    }\n\n    const nextTrial = () => {\n        let request = [\"id\"]\n        showCorrect(false)\n        getResponses(request).then((response) => {\n                    const data = response.data\n                    console.log(data)\n                    if (data.task_id != trial.task_id) {\n                        console.log(\"Task completed. Moving to next task\")\n                        history.push(`/${data.type}`)\n                    }\n                    if (data.trial_id != trial.trial_id) {\n                        console.log(\"Trial completed. Moving to next trial\")\n                        getResponse()\n                    }\n\n                    else {\n                        getResponse()\n                        setTrial(data)\n                        setA(data.sentence[0])\n                        setB(data.sentence[1])\n                    }\n              })\n            }\n    \n    useEffect( () => {\n      \n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)\n\n            setA(data.sentence[0])\n            setB(data.sentence[1])\n        });\n\n    },[]);\n///Change\n    return (\n        <div>\n            \n        <Paper className={classes.paper}>\n            <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={5}>\n            <Stack direction=\"row\" justifyContent=\"flex-start\" alignItems=\"baseline\" alignContent=\"center\" spacing={5}>\n                <TaskThreeInstructions />\n                <Typography alignSelf={'flex-start'} marginRight={'50px'} variant='body1' component=\"h2\" gutterBottom xs={3}>\n                    {trial ?  \"Question ID: \" + trial.trial_id + \" | Attempt: \" + remainingAttempts(trial.response_id) + \" of 3\" : null }\n                </Typography> \n            </Stack>\n                <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                      {trial ? trial.text.instructions_short : \"Loading...\"} \n                </Typography>\n                    <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" alignContent=\"center\" spacing={6}>\n                                      \n                        <Stack direction=\"row\" justifyContent=\"center\" alignItems=\"center\" spacing={3}>\n                        <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={3}>\n                        <Typography style={{marginRight:\"20px\", marginLeft:'20px'}} variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                        A\n                        </Typography> \n                            <Player url={sentenceA ? sentenceA.filepath : null}/>\n                        </Stack>\n                        <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={3}>\n                        <Typography style={{marginRight:\"20px\", marginLeft:'20px'}} variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                        B\n                        </Typography> \n                            <Player url={sentenceB ? sentenceB.filepath : null}/>\n                        </Stack>\n                        </Stack>\n                        <Stack direction=\"row\" justifyContent=\"flex-start\" alignItems=\"baseline\" alignContent=\"center\" spacing={5}>\n                        <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={3}>\n                        <Typography style={{marginRight:\"20px\", marginLeft:'20px'}} variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                                            More Polite?\n                        </Typography> \n                    <ToggleButtonGroup\n                            orientation=\"horizontal\"\n                            value={polite}\n                            exclusive\n                            onChange={handlePoliteChange}\n                            >\n                            <ToggleButton   value={trial ? trial.sentence[0] : -1} aria-label=\"A\" fullWidth={true}>\n                            Sentence A\n                            </ToggleButton>\n                            <ToggleButton  value={trial ? trial.sentence[1] : -1} aria-label=\"B\" fullWidth={true}>\n                            Sentence B\n                            </ToggleButton>   \n                        </ToggleButtonGroup>   \n                        </Stack>\n                    <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={3}>\n                        <Typography style={{marginRight:\"20px\", marginLeft:'20px'}} variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                        More Appropriate Prominence?\n                        </Typography> \n                    <ToggleButtonGroup\n                            orientation=\"horizontal\"\n                            value={prominent}\n                            exclusive\n                            onChange={handleProminentChange}\n                            >\n                            <ToggleButton value={trial ? trial.sentence[0] : -1} aria-label=\"list\" >\n                            Sentence A\n                            </ToggleButton>\n                            <ToggleButton value={trial ? trial.sentence[1] : -1} aria-label=\"quilt\">\n                            Sentence B\n                            </ToggleButton>   \n                        </ToggleButtonGroup>   \n                    </Stack>\n                    <Button size=\"medium\"variant=\"contained\" onClick={() =>{evaluate()}}>Submit</Button>\n                    </Stack>\n                            \n                 \n                </Stack>\n                <Box style={{width: \"100%\"}}>\n                    <Collapse in={correct}>\n                        <Alert\n                        action={\n                            <IconButton\n                            aria-label=\"close\"\n                            color=\"inherit\"\n                            size=\"small\"\n                            >\n                            </IconButton>\n                        }\n                        sx={{ mb: 2 }}\n                        >\n                        Well done! Click next to continue.\n                        </Alert>\n                    </Collapse>\n                    <Collapse in={incorrect}>\n                        <Alert\n                        action={\n                            <IconButton aria-label=\"close\" color=\"error\" size=\"small\" onClick={() => { getResponse()}}>\n                                <Icon>close</Icon>\n                            </IconButton>\n                            }\n                        severity=\"error\"\n                        sx={{ mb: 2 }}\n                        >\n                        Not Quite!\n                        </Alert>\n                    </Collapse>\n                </Box>\n            </Stack>\n            <Button size=\"large\"variant=\"contained\" style={{alignSelf:\"flex-end\"}} onClick={() =>{nextTrial()}}  disabled={!correct}>Next</Button>\n        </Paper>\n        </div>\n    )\n}\nexport default withRouter(PerceptionDiscriminationTemplate);\n\nexport const TaskThreeInstructions = () => {\n    const classes = useStyles();\n\n    const [open, setOpen] = useState(true);\n\n    const handleClose = () => {\n      setOpen(false);\n    };\n\n    const handleToggle = () => {\n      setOpen(!open);\n    };\n    \n    return (\n        <div>\n            <IconButton aria-label=\"close\" color=\"info\" size=\"small\" onClick={() => handleToggle()}>\n                            <Icon>help</Icon>\n                        </IconButton>\n            <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 2 }}\n        open={open}\n        onClick={handleClose}\n      >\n                <Paper style={{maxWidth:\"1100px\", padding:\"3%\"}} justifyContent='center'\n                minWidth='95vw'\n                height= '50vh'\n                display='flex'\n                elevation={3}\n                position='relative'\n                >\n                    <Box>\n                        <Stack direction=\"column\">\n                        \n                            <Stack direction=\"row\">\n                            Task 3. Listening. <br /><br />\n                                \n                            </Stack>\n                            <Stack direction=\"row\"><br />\n                            In this task, you will listen to pairs of sentences. Sentences in each pair will have the same words but different intonation. You will be asked to choose the sentence that has a more natural and polite tone choice (rising, falling, or level) and a more natural and appropriate prominence (stressed words).                    </Stack>\n                            <Stack direction=\"row\"><br />\n                            Intonation and politeness.\n                            </Stack>\n                            <Stack direction=\"row\"><br /><br />\n                                <Stack direction=\"column\">\n                                <b>Tone choices</b><br />\n                                In English, falling tone choices are considered more appropriate and polite.<br />\n                                Rising and level tone choices are less polite and are usually not used to make requests to professors, teachers, bosses, advisors, etc.<br /><br />\n                                </Stack>\n\n                                <Stack direction=\"column\">\n                                <b>Prominence</b><br />\n                                In English, only the words that are important for the request are stressed in a sentence. <br /> \n                                In general, only 2-3 contextually important words are normally prominent in a sentence.<br /><br />\n                                </Stack>\n                            </Stack>\n                        </Stack>\n                    </Box>\n                </Paper>\n            </Backdrop>\n        </div>\n    )\n}","import React, { useState } from 'react';\nimport Paper from '@mui/material/Paper';\nimport Stack from '@mui/material/Stack';\nimport { styled } from '@mui/material/styles';\nimport Icon from '@mui/material/Icon';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@mui/material/TextField';\nimport { v4 } from 'uuid'\nimport IconButton from '@mui/material/IconButton';\n\nconst t = {list: []}\n\nconst Item = styled(Paper)(({ theme }) => ({\n    ...theme.typography.body2,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n    }));\n\nexport const WordList = ({callback, wordList, setWordList, correct, incorrect, force}) => {\n    \n    const [word, setWord] = useState('')\n\n    const handleInput = (e) => {\n        setWord(e.target.value)\n    }\n\n    function handleAdd() {\n        const newList = wordList.concat({ value: word.toLowerCase(), id: v4()})\n        setWordList(newList)\n        setWord('');\n    }\n\n    function handleRemove(id) {\n        const newList = wordList.filter((item) => item.id !== id)\n        setWordList(newList)\n    }\n\n    return (\n        <Stack direction=\"column\" spacing={1}>\n            \n            <Stack direction=\"row\" spacing={6} xs={12}>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"code\"\n                    label=\"Enter Word\"\n                    variant=\"outlined\"\n                    value={word}\n                    onChange={handleInput}\n                    />\n                <Button onClick={ handleAdd } value={word} disabled={correct || incorrect || force }> Add </Button>\n                <Button onClick={ () => { callback(wordList) } } disabled={correct || incorrect || force}> Submit</Button>\n            </Stack>\n            <Stack direction=\"row\" spacing={2}>\n                    { wordList.map((item) => { return (\n                        <Item key={item.id}> \n                        {item.value}\n                        <IconButton aria-label=\"close\" color=\"info\" size=\"small\" onClick={() => handleRemove(item.id)}>\n                            <Icon>close</Icon>\n                        </IconButton>\n                        </Item>\n                        )})}\n                </Stack>\n        </Stack>\n       \n    );\n    }\n\nexport default WordList;","import React, {useState, useEffect, useRef} from 'react'\nimport axios from 'axios'\nimport { makeStyles } from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Fade from '@material-ui/core/Fade';\nimport Typography from '@material-ui/core/Typography';\nimport Player from '../elements/Player';\nimport Button from '@material-ui/core/Button'\nimport Stack from '@mui/material/Stack';\nimport Box from '@mui/material/Box';\nimport Alert from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport Collapse from '@mui/material/Collapse';\nimport { getResponses, submitResponse } from '../utils/responseHelper';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport WordList from '../elements/WordList';\nimport Icon from '@mui/material/Icon'\nimport Instructions from './Instructions';\nimport remainingAttempts from '../utils/remainingAttempts';\nimport { maxWidth } from '@mui/system';\nimport Backdrop from '@mui/material/Backdrop';\n\n\nconst useStyles = makeStyles((theme) => ({\n    content: { \n      justifyContent: \"center\",\n      display: \"flex\"\n    },\n      paper: {\n        padding: theme.spacing(2),\n        \n        minWidth: '100vw',\n        height: '85vh',\n        display:\"flex\",\n        elevation: 3,\n        position: 'relative',\n        justifyContent: 'center'\n        \n      },\n  }));\n\naxios.defaults.xsrfCookieName = 'csrftoken'\naxios.defaults.xsrfHeaderName = 'X-CSRFToken'\n  \nconst PerceptionIdentificationProminenceTemplate = () => {\n    let [correct, showCorrect] = useState(false);\n    let [incorrect, showIncorrect] = useState(false);\n    let [force, showForcedForward] = useState(false)\n    let [trial, setTrial] = useState(null);\n    let [attempts, setAttempts] = useState(1)\n    let [words, setWords] = useState([])\n    let [submitted, isSubmitted] = useState(null)\n\n    let sentenceData = [\"id\",\"filepath\",\"prominent_words\"]\n    let history = useHistory()\n    let instructionRef = useRef()\n    let exampleRef = useRef()\n    \n\n    \n    \n\n    const classes = useStyles();\n\n    const getResponse = () => {\n        showCorrect(false)\n        showIncorrect(false)\n        showForcedForward(false)\n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)});\n    }\n\n    const Submit = () => {\n        const isCorrect = Evaluate()\n        if (isCorrect) {\n            showCorrect(true)\n            let request = { \"eval\": 1, \"response\": { \"prominent_words\": words }, \"response_id\": trial.response_id }\n            console.log(\"Correct response registered.\")\n            submitResponse(request).then(({ nextTaskId, nextType, nextTrialId, nextResponseId }) => {\n                isSubmitted(true)\n            })\n        } else {\n            console.log(\"Incorrect response registered.\")\n            let request = { \"eval\": 0, \"response\": { \"prominent_words\": words }, \"response_id\": trial.response_id }\n            \n            submitResponse(request).then((data) => {\n                console.log(\"Attempts: \", attempts)\n                console.log(\"Attempts: \", trial.attempts)\n                if (attempts === trial.attempts) {\n                    showForcedForward(true)\n                } else {\n                    showIncorrect(true)\n                }\n                isSubmitted(true)\n            })\n        }\n    }\n\n    const Evaluate = () => {\n        const attempt = attempts + 1\n        setAttempts(attempt)\n        \n\n        let target = new Set\n\n        words.forEach((e) => target.add(e.value))\n\n        let trial_target = new Set (trial.sentence.prominent_words.split(',')) \n        // Use set operations to determine overlap. \n        let a = new Set([...trial_target].filter(x => !target.has(x))); // Check if there are some the user missed\n        let b = new Set([...target].filter(x => !trial_target.has(x))); // Check if there are some words included that are not part of the target\n\n        console.log(a.size && b.size) \n\n        console.log(b)\n        console.log(a)\n        if (!a.size && !b.size) {\n            return true;\n        } else {\n            return false;\n            }\n        };\n\n    const Next = () => {\n        let request = sentenceData\n        getResponses(request).then((response) => {\n                    const data = response.data\n                    console.log(data)\n                    if (data.task_id != trial.task_id) {\n                        console.log(\"Task completed. Moving to next task\")\n                        history.push(`/${data.type}`)\n                    } else { if (data.trial_id != trial.trial_id) {\n                        console.log(\"Trial completed. Moving to next trial\")\n                        setAttempts(0)\n                        setWords([])\n                        setTrial(data)\n                    } else { if (data.response_id != trial.response_id) {\n                        console.log(\"Response submitted. Moving to next attempt in trial set.\")\n                        setTrial(data)\n                            } else {\n                                console.log(\"Something went wrong, and task was not refreshed.\")\n                            }\n                        }\n                    }\n                })\n            }\n\n    const Clean = () => {\n        showCorrect(false)\n        showIncorrect(false)\n        isSubmitted(false)\n    }\n\n    useEffect( () => {\n        getResponses(sentenceData).then((response) => {\n            const data = response.data\n            setTrial(data)\n        });\n    },[]);\n\n    useEffect( () => {\n        if (isSubmitted) {\n            Clean()\n        }\n        return \n    },[trial]);\n///Change\n    return (\n        <div>\n            \n            \n            <Paper className={classes.paper}>\n                <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={5}>\n                    <Stack direction=\"row\" justifyContent=\"flex-start\" alignItems=\"baseline\" alignContent=\"center\" spacing={5}>\n                <TaskTwoInstructions/>\n                <Typography alignSelf={'flex-start'} marginRight={'50px'} variant='body1' component=\"h2\" gutterBottom xs={3}>\n                    {trial ?  \"Question ID: \" + trial.trial_id + \" | Attempt: \" + remainingAttempts(trial.response_id) + \" of 3\" : null }\n                </Typography>\n           \n                    </Stack>\n                    <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                      {trial ? trial.text.instructions_short : \"Loading...\"} \n                    </Typography>\n                <Player url={trial ? trial.sentence.filepath : null}/>\n                <Box style={{width: \"100%\"}}>\n                    <Collapse in={correct}>\n                        <Alert\n                        action={\n                            <IconButton\n                            aria-label=\"close\"\n                            color=\"inherit\"\n                            size=\"small\"\n                            >\n                            </IconButton>\n                        }\n                        sx={{ mb: 2 }}\n                        >\n                        Well done! Click next to continue.\n                        </Alert>\n                    </Collapse>\n                    <Collapse in={incorrect}>\n                        <Alert\n                        action={\n                            <IconButton aria-label=\"close\" color=\"error\" size=\"small\" onClick={() => { Next()}}>\n                                <Icon>close</Icon>\n                            </IconButton>\n                            }\n                        severity=\"error\"\n                        sx={{ mb: 2 }}\n                        >\n                        Try again! Listen and try again. \n                        </Alert>\n                    </Collapse>\n                    <Collapse in={force}>\n                        <Alert\n                        action={\n                            <IconButton aria-label=\"close\" color=\"error\" size=\"small\">\n                                \n                            </IconButton>\n                            }\n                        severity=\"error\"\n                        sx={{ mb: 2 }}\n                        >\n                        You've reached the maximum number of attempts. Click next to continue!\n                        </Alert>\n                    </Collapse>\n                </Box>\n                <Stack direction=\"row\" spacing={18} xs={12}>\n                    <WordList callback={Submit} wordList={words} setWordList={setWords} correct={correct} incorrect={incorrect} force={force}/>\n                </Stack>\n            </Stack>\n            <Button size=\"large\"variant=\"contained\" style={{alignSelf:\"flex-end\"}} onClick={() =>{Next()}}  disabled={!correct && !force}>Next</Button>\n        </Paper>\n        </div>\n    )\n}\n\n\nexport default withRouter(PerceptionIdentificationProminenceTemplate);\n\n\nexport const TaskTwoInstructions = () => {\n    const classes = useStyles();\n\n    const [open, setOpen] = useState(true);\n\n    const handleClose = () => {\n      setOpen(false);\n    };\n\n    const handleToggle = () => {\n      setOpen(!open);\n    };\n    \n    return (\n        <div>\n            <IconButton aria-label=\"close\" color=\"info\" size=\"small\" onClick={() => handleToggle()}>\n                            <Icon>help</Icon>\n                        </IconButton>\n            <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 2 }}\n        open={open}\n        onClick={handleClose}\n      >\n        <Paper style={{maxWidth:\"1100px\", padding:\"3%\"}} justifyContent='center'\n        minWidth='95vw'\n        height= '50vh'\n        display='flex'\n        elevation={3}\n        position='relative'\n        >\n        <Box>\n                <Stack direction=\"column\">\n                \n                <Stack direction=\"row\">\n                    Task 2: Listening\n                    <br /><br />\n                    </Stack>\n                    <Stack direction=\"row\"><br />\n                    In this task, you will listen to requests spoken with different intonation.\n                    </Stack><br />\n                    <Stack direction=\"row\"><br />\n                    For each request, you will identify the prominent words.\n                    </Stack><br />\n                    <Stack direction=\"row\">\n                    Prominent words are those words that are stressed in a sentence. They are usually louder and a bit longer than the other words.\n                    </Stack>\n                    </Stack>\n                </Box>\n            </Paper>\n      </Backdrop>\n        </div>\n    )\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {withRouter, NavLink} from 'react-router-dom'\nimport Container from '@material-ui/core/Container'\n\nconst useStyles = makeStyles((theme) => ({\n  content: {\n    justifyContent: \"center\",\n    display: \"flex\"\n  },\n    paper: {\n      padding: theme.spacing(2),\n      flexDirection: \"column\",\n      minWidth: '100vw',\n      minHeight: '80vh',\n      display:\"flex\",\n      elevation: 3,\n      justifyContent:\"center\",\n      alignItems:\"center\"\n    },\n    container: {\n        position: 'relative',\n        height: '100%',\n        justifyContent: \"center\"\n    },\n    button: {\n        position: 'absolute',\n        bottom:'0',\n        right: '0'\n    },\n    grid: {\n        height: \"50%\",\n        justifyContent:\"center\",\n        spacing:\"0\",\n        alignItems:\"center\",\n        direction:\"column\",\n        minHeight:\"100%\"\n    }\n}));\n\n\nconst End = (props) => {\n\n  const CreateTrial = (props) => {\n\n    // When the user selects Enter, experiement begins. \n    // 1. Trial is created\n    // 2. Responses are intialized\n    \n  }\n  \n  // Entry point: \n    const classes = useStyles();\n  \n    return (\n      <div className={classes.content}>\n        <Paper className={classes.paper}>\n            <Grid container className={classes.grid}>\n                <Typography variant=\"h1\" component=\"h2\" gutterBottom>\n                    Thank You!\n                </Typography>\n            </Grid>\n        </Paper>\n        </div>\n        );\n    }\n\nexport default withRouter(End);\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { styled } from '@mui/material/styles'\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { CircularProgress } from '@mui/material';\nimport { withRouter, useHistory } from 'react-router-dom';\nimport Recorder from '../elements/Recorder'\nimport Player from '../elements/Player';\nimport { processAudioData, getPitchScatterData } from '../utils/processAudio.js'\nimport { submitResponse } from '../utils/responseHelper'\nimport { PitchChart } from '../elements/AudioCharts';\nimport { getResponses } from '../utils/responseHelper';\nimport Stack from '@mui/material/Stack';\nimport TextField from '@mui/material/TextField';\nimport Box from '@mui/material/Box';\nimport Alert from '@mui/material/Alert';\nimport IconButton from '@mui/material/IconButton';\nimport Collapse from '@mui/material/Collapse';\nimport Icon from '@mui/material/Icon'\nimport Instructions from \"./Instructions\"\nimport remainingAttempts from '../utils/remainingAttempts';\nimport Backdrop from '@mui/material/Backdrop';\n\nconst Item = styled(Paper)(({ theme }) => ({\n    ...theme.typography.body2,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  }));\n  \n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        padding: theme.spacing(2),\n        justifyContent: 'center',\n        minWidth: '95vw',\n        height: '85vh',\n        display:\"flex\",\n        elevation: 3,\n        position: 'relative',\n        \n    },\n    container: {\n        position: 'relative',\n        height: '100%',\n        justifyContent: \"center\"\n    },\n    grid: {\n        height: \"50%\",\n        justifyContent:\"space-evenly\",\n        spacing:\"0\",\n        alignItems:\"center\",\n        direction:\"column\",\n        minHeight:\"100%\"\n    },\n    button: {\n        position: 'absolute',\n        bottom:'50px',\n        right: '50px'\n    },\n    chart: {\n        justifyContent:\"center\",\n        alignItems:\"center\",\n        direction:\"column\",\n        minHeight:\"275px\",\n        marginBottom: \"1vh\",\n        minWidth:\"30vw\",\n    }\n}));\n\nconst ProductionGuidedTemplate = (props) => {\n    const classes = useStyles();\n    let [processedData, setProcessedData] = useState(null)\n    let [value, setValue] = useState(\"\")\n    let [attempts, setAttempts] = useState(0)\n    let [trial, setTrial] = useState(null)\n    let [submitted, isSubmitted] = useState(null)\n\n    let [isLoading, toggleLoading] = useState(false)\n    let [correct, showCorrect] = useState(false)\n    let [incorrect, showIncorrect] = useState(false)\n    let instructionRef = useRef()\n    let exampleRef = useRef()\n\n    const sentenceData = [\"id\", \"sentence\"]\n    let history = useHistory()\n\n\n    // Essential functionality\n    \n    const Submit = () => {\n        isSubmitted(true)\n        if (processedData && value) {\n            showCorrect(true)\n            \n            let request = { \"eval\": 1, \"response\": { \"pitch\": processedData, \"input\": value }, \"response_id\": trial.response_id }\n            submitResponse(request).then(({ nextTaskId, nextType, nextTrialId, nextResponseId }) => {\n\n            })\n            return \n        } else {\n            showIncorrect(true)\n            let request = { eval: 0, response: \"\", response_id: trial.response_id }\n            submitResponse(request)\n        }\n    }\n\n    const Next = () => {\n        let request = sentenceData\n        getResponses(request).then((response) => {\n                    const data = response.data\n                    console.log(data)\n                    if (data === 'Done') {\n                        history.push('/done')\n                    }\n                    if (data.task_id != trial.task_id) {\n                        console.log(\"Task completed. Moving to next task\")\n                        history.push(`/${data.type}`)\n                    } else { if (data.trial_id != trial.trial_id) {\n                        console.log(\"Trial completed. Moving to next trial\")\n                        setTrial(data)\n                    } else { if (data.trial_id != trial.trial_id) {\n                        console.log(\"Response submitted. Moving to next attempt in trial set.\")\n                        setTrial(data)\n                            } else {\n                                console.log(\"Something went wrong, and task was not refreshed.\")\n                            }\n                        }\n                    }\n                })\n            }\n    \n\n    \n    const Evaluate = ({ userResponse, target }) => {\n        // Do something, return true or false. There is no target here. \n        if ( target === undefined ) { // Undefined target means no target set\n            return true\n            } return true \n        }\n\n    // const submitResponse = () => {\n    //     if (processedData && value) {\n    //         showCorrect(true)\n            \n    //         let request = { eval: 1, response: {data: processedData}, response_id: trial.response_id }\n    //         submitResponse(request)\n    //         Next()\n    //         return \n    //     } else {\n    //         showIncorrect(true)\n    //         let request = { eval: 0, response: \"\", response_id: trial.response_id }\n    //         submitResponse(request)\n    //     }\n    // }\n    // Tool setting and binding\n    const handleChange = (e) => {\n        setValue(e.currentTarget.value)\n    }\n\n    const handleClose = () => {\n        showIncorrect(false)\n    }\n\n    const handleAudioChange = (data) => {\n        if (data === undefined) {\n            alert(\"Something went wrong with the recording. Please try again!\")\n            return\n        }\n        // Whenever a participant makes a recording.\n        const audio = data\n        const response_id = trial.response_id\n        const requestData = {\"audio\":audio, \"response_id\":response_id}\n        // let newCanvas = resetCanvas('response-data', 'response-data-container', chartB)\n        processAudioData(requestData).then((response) => { \n            let pitchData = getPitchScatterData(response.data)\n            setProcessedData(pitchData) // Stages data for submission.\n            toggleLoading(false)});\n        }\n\n    // Essential functionality\n\n    const Clean = () => {\n        showCorrect(false)\n        showIncorrect(false)\n        isSubmitted(false)\n        setAttempts(0)\n        setValue('')\n        setProcessedData(null)\n    }\n\n    \n    useEffect( () => {\n        getResponses(sentenceData).then((response) => {\n\n            if (response.type === 'Done') {\n                history.push('/done')\n            } \n            const data = response.data\n            setTrial(data)\n            instructionRef.current.textContent = data.text.instructions\n            exampleRef ? exampleRef.current.textContent = data.text.example_text : console.log(\"Undefined element\")});\n\n    },[]);\n\n    useEffect( () => {\n        if (isSubmitted) {\n            Clean()\n        }\n\n        return \n    },[trial]);\n\n    return (\n            <div>\n                \n                <Paper className={classes.paper}>\n                <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={5}>\n                    <Stack direction=\"row\" justifyContent=\"flex-start\" alignItems=\"baseline\" alignContent=\"center\" spacing={5}>\n                <TaskFourInstructions/>\n                <Typography alignSelf={'flex-start'} marginRight={'50px'} variant='body1' component=\"h2\" gutterBottom xs={3}>\n                    {trial ?  \"Question ID: \" + trial.trial_id + \" | Attempt: \" + remainingAttempts(trial.response_id) + \" of 3\" : null }\n                </Typography>\n           \n                    </Stack>\n                    <Typography variant=\"subtitle1\" component=\"h2\" gutterBottom>\n                      {trial ? trial.text.instructions_short : \"Loading...\"} \n                    </Typography>\n                                <Stack direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={3}spacing={5}>\n                                        <Item>{trial ? trial.sentence.sentence : \"Loading...\"} </Item>      \n                                    <Stack direction=\"row\" justifyContent=\"center\" alignItems=\"center\" spacing={5} xs={6}>\n                                  \n                \n                                        <Stack direction=\"column\">\n                                        {isLoading ? \n                                        <Paper id=\"response-data-container\" className={classes.chart} style={{display:\"flex\", alignContent: \"center\", alignContent:\"center\"}}>\n                                            <CircularProgress style={{display:\"relative\"}}/> \n                                        </Paper>\n                                        :\n                                        <Paper id=\"response-data-container\" className={classes.chart} style={{display:\"flex\", alignContent: \"center\", alignContent:\"center\"}}>\n                                            <PitchChart data={processedData}/>\n                                        </Paper>}\n                                            <Recorder alignSelf=\"flex-end\" sets={(data) => {handleAudioChange(data); toggleLoading(true);} }/>\n                                        </Stack>\n                                        <Box alignSelf=\"flex-start\"\n                                            component=\"form\"\n                                            sx={{\n                                                '& .MuiTextField-root': { m: 1, width: '25ch' },\n                                            }}\n                                            noValidate\n                                            autoComplete=\"off\"\n                                            >\n                                        <TextField\n                                            id=\"filled-multiline-flexible\"\n                                            label=\"What did you do to sound polite?\"\n                                            multiline\n                                            maxRows={4}\n                                            value={value}\n                                            onChange={handleChange}\n                                            variant=\"filled\"\n                                            minWidth=\"300px\"\n                                            />\n                                            <Collapse in={correct}>\n                        <Alert\n                        action={\n                            <IconButton\n                            aria-label=\"close\"\n                            color=\"inherit\"\n                            size=\"small\"\n                            >\n                            </IconButton>\n                        }\n                        sx={{ mb: 2 }}\n                        >\n                        Well done! Click next to continue.\n                        </Alert>\n                    </Collapse>\n                    <Collapse in={incorrect}>\n                        <Alert\n                        action={\n                            <IconButton aria-label=\"close\" color=\"error\" size=\"small\" onClick={() => {handleClose() }}>\n                                <Icon>close</Icon>\n                            </IconButton>\n                            }\n                        severity=\"error\"\n                        sx={{ mb: 2 }}\n                        >\n                        Try again! Remember to explain your intonation choices.\n                        </Alert>\n                    </Collapse>\n                                    </Box>\n                                        <Button style={{alignSelf:\"flex-end\"}} variant=\"outlined\" onClick={() => {Evaluate({userResponse: {\"data\": processedData, \"text\": value }, target: trial.target}) ? Submit() : console.log(\"Failed evaluation. \")}} disabled={ trial ? attempts > trial.attempts : true }> Submit</Button> \n                                        <Button style={{alignSelf:\"flex-end\"}} variant=\"outlined\" onClick={() => {Next()}} disabled={!submitted}>Next</Button>\n                                    </Stack>\n                                    \n                                </Stack>\n                                \n                               \n                            </Stack>\n                            \n                    </Paper>\n                </div>\n        );\n    }\n\nexport default withRouter(ProductionGuidedTemplate)\n\nexport const TaskFourInstructions = () => {\n    const classes = useStyles();\n\n    const [open, setOpen] = useState(true);\n\n    const handleClose = () => {\n      setOpen(false);\n    };\n\n    const handleToggle = () => {\n      setOpen(!open);\n    };\n    \n    return (\n        <div>\n                <IconButton aria-label=\"close\" color=\"info\" size=\"small\" onClick={() => handleToggle()}>\n                    <Icon>help</Icon>\n                </IconButton>\n                <Backdrop\n                    sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 2 }}\n                    open={open}\n                    onClick={handleClose}\n                >\n                <Paper style={{maxWidth:\"1100px\", padding:\"3%\"}} justifyContent='center'\n                minWidth='95vw'\n                height= '50vh'\n                display='flex'\n                elevation={3}\n                position='relative'\n                >\n                    <Box>\n                        <Stack direction=\"column\">\n                            <Stack direction=\"row\">\n                            Task 4. Speaking.<br /><br />\n                            </Stack>\n                            <Stack direction=\"row\"><br />\n                            In this last task, you will record yourself saying requests, paying attention to the tone choices and prominence.                    </Stack>\n                            <Stack direction=\"row\"><br />\n                            Repeat the sentence you see below. Remember to pay attention to your tone choices at the end of the sentence and your prominence (stressed words).\n                            <br /><br />\n                            </Stack>\n                            <Stack direction=\"row\">\n                                <Stack direction=\"column\">\n                                <b>Tone choices: </b><br />\n                                Remember that falling intonation is more polite and appropriate at<br /> \n                                the end of a request to a professor or an advisor.\n                                <br />\n                                </Stack>\n                                <Stack direction=\"column\">\n                                <b>Prominence:</b> <br />\n                                Remember to only stress contextually important words in the sentence (2-3 words maximum).\n                                </Stack>\n                            </Stack>\n                        </Stack>\n                    </Box>\n                </Paper>\n            </Backdrop>\n        </div>\n    )\n}","import React from 'react'\nimport Welcome from './components/pages/Welcome'\nimport ProductionControlledTemplate from './components/pages/ProductionControlledTemplate'\nimport PerceptionDiscriminationTemplate from './components/pages/PerceptionDiscriminationTemplate'\nimport PerceptionIdentificationTonesTemplate from './components/pages/PerceptionIdentificationTonesTemplate'\nimport PerceptionIdentificationProminenceTemplate from './components/pages/PerceptionIdentificationProminenceTemplate'\nimport End from './components/pages/End'\nimport { MemoryRouter } from \"react-router-dom\"\nimport { Route, Switch } from 'react-router-dom'\nimport ProductionGuidedTemplate from './components/pages/ProductionGuidedTemplate'\n\nexport default function App() {\n\n    return (\n      <div className=\"App\">\n        <MemoryRouter>\n          <Switch>\n            <Route exact path=\"/\" component={Welcome} />\n            <Route exact path=\"/perception-identification-tones\" component={PerceptionIdentificationTonesTemplate} />\n            <Route exact path=\"/perception-discrimination\" component={PerceptionDiscriminationTemplate} />\n            <Route exact path=\"/perception-identification-prominence\" component={PerceptionIdentificationProminenceTemplate} />\n            <Route path=\"/production-controlled\" component={ProductionControlledTemplate} />\n            <Route path=\"/production-guided\" component={ProductionGuidedTemplate} />\n            <Route path=\"/done\" component={End} />\n          </Switch>\n        </MemoryRouter>\n      </div>\n    );\n  }\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}